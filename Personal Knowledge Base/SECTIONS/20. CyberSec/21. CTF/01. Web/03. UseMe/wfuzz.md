

# Что такое фаззинг?

> _Фаззинг — это техника тестирования программного обеспечения, часто автоматическая или полуавтоматическая, заключающаяся в передаче приложению на вход неправильных, неожиданных или случайных данных.

Фазз-тестирование или фаззинг - это техника тестирования программного обеспечения методом "черного ящика", которая в основном заключается в поиске ошибок реализации с помощью введения недостоверных/полунедостоверных данных в автоматизированной задаче.

Этот анализ является техникой тестирования программного обеспечения, используемой разработчиками и тестерами на проникновение для проверки своих приложений против неожиданных, недопустимых и случайных наборов вводимых данных. В ответ на это приложение выдает исключение или сбой. Это действие показывает нам некоторые из основных уязвимостей в приложении, которые невозможно обнаружить иным способом. К ним относятся переполнение буфера, форматные строки, инъекции кода, висячие указатели, условия гонки, условия отказа в обслуживании и многие другие типы уязвимостей.

FUZZ testing (fuzzing) - это тип тестирования безопасности, который обнаруживает ошибки кодирования и лазейки в программном обеспечении, операционных системах или сетях. Фаззинг включает в себя ввод огромного количества случайных данных, называемых fuzz, в тестируемое программное обеспечение, чтобы заставить его дать сбой или прорвать его защиту. Фаззинг часто выявляет уязвимости, которые могут быть использованы с помощью SQL-инъекции, переполнения буфера, отказа в обслуживании (DOS) и XSS. Fuzz-тестирование выполняется с помощью фаззера - программы, которая автоматически вводит полуслучайные данные в программу и обнаруживает ошибки. Fuzz-тестирование обычно выполняется автоматически.

Обычно fuzzing обнаруживает наиболее серьезные ошибки или дефекты безопасности. Это очень экономически эффективный метод тестирования. Fuzzing - один из самых распространенных методов хакеров, используемых для обнаружения уязвимости системы (сюда относятся популярные SQL- или скриптовые инъекции). 

Примеры фаззеров:

- Mutation-Based Fuzzers: Этот тип фаззера проще всего создать, поскольку он изменяет существующие образцы данных для создания новых тестовых данных. Это относится к тупому фаззеру, но его можно использовать с более интеллектуальными фаззерами. Мы можем сделать это, выполнив некоторый уровень анализа образцов, чтобы гарантировать, что он изменяет только определенные части или не нарушает общую структуру ввода;
    

- Generation-Based Fuzzers: Этот тип фаззера требует большего интеллекта для создания тестовых данных с нуля, т.е. новые тестовые данные создаются на основе входной модели. Обычно он разбивает протокол или формат файла на фрагменты, которые затем выстраиваются в допустимом порядке, и эти фрагменты случайным образом распределяются независимо друг от друга;
    

- PROTOCOL-BASED-fuzzer: самый успешный фаззер - это детальное знание тестируемого формата протокола. Понимание зависит от спецификации. Это включает в себя запись массива спецификации в инструмент, а затем с помощью метода генерации тестов на основе модели проходится спецификация и добавляется неравномерность в содержимое данных, последовательность и т. д. Это также известно как синтаксическое тестирование, грамматическое тестирование, тестирование надежности, и т. д. Fuzzer может генерировать Test case из существующего или использовать допустимые или недействительные входные данные;
    

Типы ошибок, обнаруживаемых Fuzz testing:

- Сбои ассертов и утечки памяти (Assertion failures and memory leaks). Эта методология широко используется для больших приложений, где ошибки влияют на безопасность памяти, что является серьезной уязвимостью;
    

- Некорректный ввод (Invalid input). Фаззеры используются для генерирования неверного ввода, который используется для тестирования процедур обработки ошибок, и это важно для программного обеспечения, которое не контролирует его ввод. Простой фаззинг может быть способом автоматизации отрицательного тестирования;
    

Исправление ошибок (Correctness bugs). Fuzzing также может использоваться для обнаружения некоторых типов ошибок «правильности». Например, поврежденная база данных, плохие результаты поиска и т. д.;

Существует несколько различных типов уязвимостей, которые обычно используются для тестирования WFuzz. Эти уязвимости включают в себя:

1. Обнаружение важных веб-страниц, которые не обеспечивают надлежащего контроля доступа (например, панели администратора или файлы конфигурации).

2. Уязвимости, связанные с инъекциями, такие как обход каталогов, SQL-инъекции, XSS-инъекции и XXE-инъекции.

3. Перебор общих учетных данных

4. Известные уязвимости с открытым исходным кодом, такие как атаки на основе Apache и Sharepoint.


**Основные возможности Wfuzz:**

- Фаззинг поддоменов
- Фаззинг каталогов
- Фаззинг файлов cookie
- Фаззинг заголовка (Header)
- Фаззинг параметра

# История фаззинга

Классическое фазз-тестирование было разработано в Университете Висконсин-Мэдисон в 1989 году профессором Бартоном Миллером и студентами. Она в основном ориентирована на фаззинг командной строки и пользовательского интерфейса, и показывает, что современные операционные системы уязвимы даже для простого фаззинга.


# Типы атак в фаззинге

Обычно фаззер (программа для фаззинга) пробует комбинации атак на:

- числа (целые числа со знаком/без знака/плоские числа и т.д.).
- символы (урлы, вводы командной строки).
- метаданные: вводимый пользователем текст (тег id3).
- чистые двоичные последовательности.

Общий подход к fuzzing заключается в определении списков "известных опасных значений" (fuzz vectors) для каждого типа, и внедрении их или их комбинаций.

- Для целых чисел: ноль, возможно, отрицательные или очень большие числа.
- Для символов: экранированные, интерпретируемые символы / инструкции (например: для SQL-апросов, кавычки / команды и т.д.).
- Для двоичных чисел: случайные единицы.
- Для символов: экранированные, интерпретируемые символы / инструкции (например: для SQL-запросов, кавычки / команды и т.д.).

---

Wfuzz был создан для облегчения задачи оценки веб-приложений и основан на простой концепции: он заменяет любую ссылку на ключевое слово FUZZ значением данной полезной нагрузки.

# Как пользоваться wfuzz


## Cканирование каталогов 

```
wfuzz -c -z file,wordlist/general/big.txt –hc 404 http://site.com/FUZZ
```


## Подробная информация/более подробный вывод

Для более подробной информации используйте параметр **-v**:

```
wfuzz -v -z file,wordlist/general/big.txt –hc 404 301 http://site.com/FUZZ
```

Параметр флага -w указывает список слов, который следует использовать для перечисления. В этом случае вам следует выбрать хороший список слов для перечисления путей, разработанный для технологии, используемой вашей целью. Флаг -f указывает расположение выходного файла. Здесь мы сохраняем наши результаты в файл с именем _output.txt_ в текущем каталоге. Параметр --hc 404 указывает Wfuzz исключить любой ответ с кодом состояния 404. Помните, что этот код означает «Файл не найден». С помощью этого фильтра мы можем легко удалить URL-адреса, которые не указывают на допустимый файл или каталог, из списка результатов. Флаг --follow указывает Wfuzz следовать всем HTTP-перенаправлениям, чтобы наш результат отображал фактическое назначение URL-адреса.


## SQL-Injection

Сначало перехватите http-запрось как нибудь. Это можно сделать с п.м. burp или даже браузера. Потом задайте wfuzz соотвествующие параметры:

```
wfuzz -c -z file,/usr/share/wordlists/wfuzz/Injections/SQL.txt -d «имя пользователя=admin&password=FUZZ» -u <TARGET_URL>_
```

Чтобы разобрать эту команду, мы можем взглянуть на то, что каждый аргумент предоставляет wfuzz. Для начала флаг _-c_ делает вывод цвета терминала, что просто облегчает чтение результатов. Флаг _-z_ указывает полезную нагрузку, используемую для фаззинга веб-страницы. Предоставленный аргумент представляет собой файл, расположенный в /usr/share/wordlists/wfuzz/Injections/SQL.txt. Kali Linux хранит все списки слов для каждой программы в /usr/share/wordlists. Внутри папки wfuzz вы найдете все распространенные списки слов, на использование которых настроен wfuzz. В этом случае я использовал список слов SQL-инъекций, чтобы посмотреть на распространенные SQL-инъекции. Вы можете так же легко добавлять в эти списки или создавать свои собственные, если у вас есть конкретные тестовые случаи, которые вы хотите применить.

После этого мы используем _флаг -d_ , чтобы указать, какие данные отправлять на сервер. Как мы уже говорили, формат «имя пользователя = ВХОД и пароль = ВХОД». В этом случае я установил имя пользователя admin и пароль FUZZ. Wfuzz настроен на замену ключевого слова FUZZ словами в предоставленном файле полезной нагрузки, поэтому в этом примере мы внедряем ключевые слова SQL-инъекций в параметр пароля. Наконец, мы указываем целевой URL и запускаем приложение. Как только это будет сделано, мы получим результат, аналогичный показанному ниже.


## XSS 

```
wfuzz -c -z file,/usr/share/wfuzz/wordlist/Injections/XSS.txt http://172.16.1.102/mutillidae/index.php?page=FUZZ
```

Просто добавьте нужный кодировщик (в данном случае **urlencode** ) к указанному файлу через запятую, чтобы закодировать полезные нагрузки:

```
wfuzz -c -z file,/usr/share/wfuzz/wordlist/Injections/XSS.txt,urlencode http://172.16.1.102/mutillidae/index.php?page=FUZZ
```

