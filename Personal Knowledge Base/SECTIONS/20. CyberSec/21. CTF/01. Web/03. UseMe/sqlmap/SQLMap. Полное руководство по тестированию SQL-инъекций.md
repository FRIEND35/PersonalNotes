
![[Pasted image 20240731021649.png]]

SQL-инъекция — это распространенный вектор атаки для хакеров, желающих украсть конфиденциальные данные из уязвимых веб-приложений. SQLMap — это популярный инструмент для тестирования на проникновение с открытым исходным кодом, который автоматизирует процесс обнаружения и эксплуатации уязвимостей SQL-инъекции в веб-приложениях. В этом руководстве мы рассмотрим, как использовать SQLMap с различными командами и примерами для обнаружения и эксплуатации уязвимостей SQL-инъекции в веб-приложениях.

**Installation**

SQLMap — это инструмент на основе Python, поэтому для его работы требуется интерпретатор Python. Вы можете установить SQLMap, загрузив последнюю версию с официального сайта или клонировав репозиторий Git. После загрузки SQLMap вы можете запустить его, перейдя в каталог, где он установлен, и выполнив следующую команду:

```
python sqlmap.py
```

**Основное использование**

Основной синтаксис для запуска SQLMap следующий:

```
sqlmap -u < target_url > [options]
```

Здесь <target_url> — это URL-адрес целевого веб-приложения. SQLMap автоматически просканирует цель на наличие уязвимостей SQL-инъекции и попытается их эксплуатировать. Вы можете использовать различные параметры для настройки поведения SQLMap, например, указать точку инъекции, базу данных, таблицу или столбец для цели, а также метод инъекции для использования.

**Сканирование на наличие уязвимостей**

Первый шаг в использовании SQLMap — сканирование цели на предмет уязвимостей SQL-инъекции. Для этого просто запустите SQLMap с целевым URL следующим образом:

```
sqlmap -u <target_url>​
```

SQLMap автоматически определит, уязвима ли цель для SQL-инъекции, и предоставит информацию о типе обнаруженной инъекции. По умолчанию SQLMap будет использовать технику инъекции на основе UNION для обнаружения уязвимостей, но вы можете указать другую технику с помощью параметра --technique.

**Использование уязвимостей**

Как только SQLMap обнаружил уязвимость SQL-инъекции, следующим шагом будет ее эксплуатация. SQLMap предоставляет множество вариантов эксплуатации уязвимостей, таких как дамп содержимого базы данных, таблицы или столбца, запуск команд операционной системы на целевой машине или даже получение оболочки на целевой системе.

**Вот некоторые из наиболее часто используемых команд SQLMap:**

**Выгрузка содержимого базы данных**  
Вы можете выгрузить содержимое базы данных, таблицы или столбца, используя опцию --dump, за которой следует имя базы данных, таблицы или столбца для выгрузки. Например, чтобы выгрузить содержимое таблицы "users" в базе данных "exampledb", выполните следующую команду:

```
sqlmap -u <target_url> --dump -D exampledb -T users
```

**Запуск команд операционной системы**  
Вы можете запускать команды операционной системы на целевой машине, используя опцию --os-shell, за которой следует команда для запуска. Например, чтобы вывести список содержимого текущего каталога на целевой машине, выполните следующую команду:

```
sqlmap -u <target_url> --os-shell "ls -la"
```

**Получение оболочки SQL**  
Вы можете получить оболочку на целевой машине, используя опцию --sql-shell. Это откроет оболочку SQL на целевой базе данных, что позволит вам выполнять команды SQL и даже загружать файлы на целевую систему. Например, чтобы открыть оболочку SQL на целевой базе данных, выполните следующую команду:

```
sqlmap -u <target_url> --sql-shell
```

**Сохранение отчетов**  
Сохраните отчет в файл: Вы можете сохранить вывод сканирования или эксплуатации SQLMap в файл, используя опцию -o или — output-file, за которой следует имя файла и путь, по которому вы хотите сохранить отчет. Например, следующая команда сохраняет результаты сканирования SQLMap в файл с именем «scan_report.txt» в текущем каталоге:

```
sqlmap -u http://example.com/? id =1 -o scan_report.txt
```

Генерация HTML-отчета: SQLMap также позволяет вам генерировать HTML-отчет о результатах сканирования или эксплуатации, используя опцию — output-html, за которой следует имя файла и путь, по которому вы хотите сохранить отчет. Например, следующая команда генерирует HTML-отчет с именем «scan_report.html» в текущем каталоге:

sqlmap -u http://example.com/? id =1 - output-html scan_report.html

**Вот несколько полезных команд для SQLMap:**

1. **Базовые команды**  
    **'-u'** : указывает целевой URL-адрес веб-приложения для тестирования.  
    **'-p'** : указывает параметр для тестирования на наличие SQL-инъекций.  
    **'- - data'** : указывает строку данных для отправки через запрос POST.  
    **'- -cookie'** : указывает строку cookie для использования в HTTP-запросе.  
    **'- - dbms** ': указывает целевую СУБД (систему управления базами данных), например MySQL, Oracle или Microsoft SQL Server.
2. Команды сканирования  
    **'- -level'** : Указывает уровень выполняемых тестов. Уровень по умолчанию — 1, и вы можете увеличить уровень до 5 для более комплексных тестов.  
    **'- - risk'** : Указывает уровень риска для цели. Значение по умолчанию — 1, и вы можете увеличить значение до 3 для более чувствительных целей.  
    **'- - threads'** : Указывает количество потоков, используемых для сканирования. Значение по умолчанию — 1, и вы можете увеличить значение для более быстрого сканирования.
3. **Команды эксплойта**  
    **'- - dump'** : выводит содержимое базы данных, таблицы или столбца, указанного в команде.  
    **'- - os-shell'** : выполняет команды операционной системы на целевой машине.  
    **'- - sql-shell'** : предоставляет интерактивную оболочку SQL для целевой базы данных.  
    **'- - file-read'** : считывает файлы с целевой машины.  
    **'- - file-write'** : записывает файлы на целевую машину.
4. **Команды вывода**  
    **'-o'** : Указывает выходной файл для результата сканирования. Вывод может быть сохранен в различных форматах, таких как текст, XML или HTML.  
    **'- -flush-session'** : Удаляет текущий файл сеанса.  
    **'- - save'** : Сохраняет текущий сеанс в файл.  
    **'- - load'** : Загружает сохраненный сеанс из файла.
5. **Расширенные команды**  
    **'- - techniques'** : указывает используемый метод внедрения, например, внедрение на основе UNION, на основе ошибок или на основе времени.  
    **'- - tamper'** : указывает скрипт для изменения полезных данных внедрения SQL, отправляемых SQLMap.  
    **'- - random-agent'** : указывает случайную строку user-agent для HTTP-запроса.  
    **'- - tor'** : указывает использование сети Tor для анонимного сканирования.

Это лишь некоторые из многих команд, доступных в SQLMap. Важно использовать SQLMap ответственно и только в веб-приложениях, на тестирование которых у вас есть разрешение.

**Заключение**

SQLMap — это мощный инструмент для выявления и эксплуатации уязвимостей SQL-инъекций в веб-приложениях. Благодаря множеству опций и команд SQLMap может помочь вам автоматизировать процесс тестирования на проникновение и быстро выявлять уязвимости в ваших веб-приложениях. Однако важно использовать SQLMap ответственно и только в тех веб-приложениях, на тестирование которых у вас есть разрешение.

