
# IP Addresses

---

Каждый хост в расположенной сети можно идентифицировать по так называемому `Media Access Control` адрес ( `MAC`). Это позволит осуществлять обмен данными внутри этой единой сети. Если удаленный хост находится в другой сети, знание `MAC` адреса недостаточно для установления соединения. Адресация в Интернете осуществляется через `IPv4` и/или `IPv6` адрес, который состоит из `network address` и `host address`.

Не имеет значения, будет ли это меньшая сеть, например домашняя компьютерная сеть, или весь Интернет. IP-адрес обеспечивает доставку данных нужному получателю. Мы можем представить себе представление `MAC` и `IPv4` / `IPv6` адреса следующие:

- `IPv4` / `IPv6` - описывает уникальный почтовый адрес и район дома получателя.
- `MAC` - описывает точный этаж и квартиру получателя.

Один IP-адрес может адресоваться нескольким получателям (широковещательная передача) или устройство может отвечать на несколько IP-адресов. Однако необходимо убедиться, что каждый IP-адрес назначается в сети только один раз.

---

## IPv4 Structure

Самый распространенный метод назначения IP-адресов — `IPv4`, который состоит из `32`-битовое двоичное число, объединенное в `4 bytes` состоящий из `8`-битовые группы ( `octets`) начиная от `0-255`. Они преобразуются в более удобочитаемые десятичные числа, разделяются точками и представляются в виде десятичной записи с точками.

Таким образом, адрес IPv4 может выглядеть так:

|**Обозначения**|**Презентация**|
|---|---|
|Двоичный|0111 1111.0000 0000.0000 0000.0000 0001|
|десятичный|127.0.0.1|

Каждому сетевому интерфейсу (сетевым картам, сетевым принтерам или маршрутизаторам) назначается уникальный IP-адрес.

The `IPv4` Формат допускает 4 294 967 296 уникальных адресов. IP-адрес разделен на `host part` и `network part`. `router` назначает `host part` IP-адреса дома или администратором. Соответствующий `network administrator` назначает `network part`. В Интернете это `IANA`, который распределяет уникальные IP-адреса и управляет ими.

Раньше здесь происходила дальнейшая классификация. Блоки IP-сети были разделены на `classes A - E`. Различные классы различались соответствующей длиной общих ресурсов хоста и сети.

|**`Class`**|**Сетевой адрес**|**Первый адрес**|**Последний адрес**|**Маска подсети**|**ЦИДР**|**Подсети**|**IP-адреса**|
|---|---|---|---|---|---|---|---|
|`A`|1.0.0.0|1.0.0.1|127.255.255.255|255.0.0.0|/8|127|16 777 214 + 2|
|`B`|128.0.0.0|128.0.0.1|191.255.255.255|255.255.0.0|/16|16 384|65 534 + 2|
|`C`|192.0.0.0|192.0.0.1|223.255.255.255|255.255.255.0|/24|2 097 152|254 + 2|
|`D`|224.0.0.0|224.0.0.1|239.255.255.255|Многоадресная рассылка|Многоадресная рассылка|Многоадресная рассылка|Многоадресная рассылка|
|`E`|240.0.0.0|240.0.0.1|255.255.255.255|сдержанный|сдержанный|сдержанный|сдержанный|

---

## Subnet Mask

Дальнейшее разделение этих классов на мелкие сети осуществляется с помощью `subnetting`. Такое разделение осуществляется с помощью `netmasks`, длина которого равна IPv4-адресу. Как и в случае с классами, он описывает, какие позиции битов в IP-адресе действуют как `network part` или `host part`.

|**Сорт**|**Сетевой адрес**|**Первый адрес**|**Последний адрес**|**`Subnetmask`**|**ЦИДР**|**Подсети**|**IP-адреса**|
|---|---|---|---|---|---|---|---|
|**А**|1.0.0.0|1.0.0.1|127.255.255.255|`255.0.0.0`|/8|127|16 777 214 + 2|
|**Б**|128.0.0.0|128.0.0.1|191.255.255.255|`255.255.0.0`|/16|16 384|65 534 + 2|
|**С**|192.0.0.0|192.0.0.1|223.255.255.255|`255.255.255.0`|/24|2 097 152|254 + 2|
|**Д**|224.0.0.0|224.0.0.1|239.255.255.255|`Multicast`|Многоадресная рассылка|Многоадресная рассылка|Многоадресная рассылка|
|**Э**|240.0.0.0|240.0.0.1|255.255.255.255|`reserved`|сдержанный|сдержанный|сдержанный|

---

## Network and Gateway Addresses

The `two` дополнительный `IPs` добавлено в `IPs column` зарезервированы для так называемых `network address` и `broadcast address`. Еще одну важную роль играет `default gateway`, которое является именем IPv4-адреса `router` который объединяет сети и системы с различными протоколами и управляет адресами и методами передачи. Это обычное явление для `default gateway` которому будет назначен первый или последний назначаемый IPv4-адрес в подсети. Это не техническое требование, но стало стандартом де-факто в сетевых средах любого размера.

|**Сорт**|**Сетевой адрес**|**`First Address`**|**Последний адрес**|**Маска подсети**|**ЦИДР**|**Подсети**|**`IPs`**|
|---|---|---|---|---|---|---|---|
|А|1.0.0.0|`1.0.0.1`|127.255.255.255|255.0.0.0|/8|127|16 777 214 `+ 2`|
|Б|128.0.0.0|`128.0.0.1`|191.255.255.255|255.255.0.0|/16|16 384|65 534 `+ 2`|
|С|192.0.0.0|`192.0.0.1`|223.255.255.255|255.255.255.0|/24|2 097 152|254 `+ 2`|
|Д|224.0.0.0|`224.0.0.1`|239.255.255.255|Многоадресная рассылка|Многоадресная рассылка|Многоадресная рассылка|Многоадресная рассылка|
|Э|240.0.0.0|`240.0.0.1`|255.255.255.255|сдержанный|сдержанный|сдержанный|сдержанный|

---

## Broadcast Address

The `broadcast` Задача IP-адреса — соединить все устройства в сети друг с другом. `Broadcast` в сети — сообщение, которое передается всем участникам сети и не требует никакого ответа. Таким образом, хост отправляет пакет данных всем остальным участникам сети одновременно и при этом сообщает свой `IP address`, который получатели могут использовать для связи с ним. Это `last IPv4` адрес, который используется для `broadcast`.

| **Сорт** | **Сетевой адрес** | **Первый адрес** | **`Last Address`** | **Маска подсети**      | **ЦИДР**               | **Подсети**            | **IP-адреса**          |
| -------- | ----------------- | ---------------- | ------------------ | ---------------------- | ---------------------- | ---------------------- | ---------------------- |
| А        | 1.0.0.0           | 1.0.0.1          | `127.255.255.255`  | 255.0.0.0              | /8                     | 127                    | 16 777 214 + 2         |
| Б        | 128.0.0.0         | 128.0.0.1        | `191.255.255.255`  | 255.255.0.0            | /16                    | 16 384                 | 65 534 + 2             |
| С        | 192.0.0.0         | 192.0.0.1        | `223.255.255.255`  | 255.255.255.0          | /24                    | 2 097 152              | 254 + 2                |
| Д        | 224.0.0.0         | 224.0.0.1        | `239.255.255.255`  | Многоадресная рассылка | Многоадресная рассылка | Многоадресная рассылка | Многоадресная рассылка |
| Э        | 240.0.0.0         | 240.0.0.1        | `255.255.255.255`  | сдержанный             | сдержанный             | сдержанный             | сдержанный             |
Широковещательный адрес — это специальный IP-адрес, который используется для отправки данных всем устройствам в одной сети или подсети. Вместо того, чтобы отправлять данные конкретному узлу, широковещательный адрес позволяет передать сообщение всем узлам одновременно.

В IPv4 для создания широковещательного адреса все биты адреса, соответствующие узлам (host bits), имеют значение 1. Например, если у вас есть сеть с адресом 192.168.1.0 и маской подсети 255.255.255.0 (/24), то:

- Сетевой адрес: 192.168.1.0
- Широковещательный адрес: 192.168.1.255

При отправке пакета на широкий адрес 192.168.1.255, все устройства в подсети 192.168.1.0/24 получат это сообщение.

Широковещательные адреса часто используются для таких целей, как:

- Обнаружение устройств в сети.
- Обновления программного обеспечения или конфигураций для всех устройств одновременно.
- Различные сервисы, которые требуют доставки сообщений всем узлам сети.

Важно, что использование широковещательных адресов должно быть осознанным, так как избыточное широковещание может приводить к перегрузке сети.

---

## Binary system

Двоичная система — это система счисления, в которой используются только два разных состояния, которые представлены двумя числами ( `0` и `1`) напротив десятичной системы (от 0 до 9).

Как мы уже видели, IPv4-адрес разделен на 4 октета. Каждый `octet` состоит из `8 bits`. Каждая позиция бита в октете имеет определенное десятичное значение. В качестве примера возьмем следующий IPv4-адрес:

- IPv4-адрес: `192.168.10.39`

Вот пример того, как `first octet` выглядит так:

#### 1st Octet - Value: 192

```shell-session
Values:         128  64  32  16  8  4  2  1
Binary:           1   1   0   0  0  0  0  0
```

Если мы вычислим сумму всех этих значений для каждого октета, где бит установлен в `1`, получаем сумму:

|**Октет**|**Ценности**|**Сумма**|
|---|---|---|
|1-й|128 + 64 + 0 + 0 + 0 + 0 + 0 + 0|= `192`|
|2-й|128 + 0 + 32 + 0 + 8 + 0 + 0 + 0|= `168`|
|3-й|0 + 0 + 0 + 0 + 8 + 0 + 2 + 0|= `10`|
|4-й|0 + 0 + 32 + 0 + 0 + 4 + 2 + 1|= `39`|

Полное представление от двоичного к десятичному будет выглядеть так:

#### IPv4 - Binary Notation

```shell-session
Octet:             1st         2nd         3rd         4th
Binary:         1100 0000 . 1010 1000 . 0000 1010 . 0010 0111
Decimal:           192    .    168    .     10    .     39
```

- IPv4-адрес: `192.168.10.39`

Это сложение происходит для каждого октета, что приводит к десятичному представлению числа. `IPv4 address`. Маска подсети рассчитывается таким же образом.

#### IPv4 - Decimal to Binary

```shell-session
Values:         128  64  32  16  8  4  2  1
Binary:           1   1   1   1  1  1  1  1
```

|**Октет**|**Ценности**|**Сумма**|
|---|---|---|
|1-й|128 + 64 + 32 + 16 + 8 + 4 + 2 + 1|= `255`|
|2-й|128 + 64 + 32 + 16 + 8 + 4 + 2 + 1|= `255`|
|3-й|128 + 64 + 32 + 16 + 8 + 4 + 2 + 1|= `255`|
|4-й|0 + 0 + 0 + 0 + 0 + 0 + 0 + 0|= `0`|

#### Subnet Mask

```shell-session
Octet:             1st         2nd         3rd         4th
Binary:         1111 1111 . 1111 1111 . 1111 1111 . 0000 0000
Decimal:           255    .    255    .    255    .     0
```

- IPv4-адрес: `192.168.10.39`
    
- Маска подсети: `255.255.255.0`
    

---

## CIDR

`Classless Inter-Domain Routing` ( `CIDR`) — это метод представления, который заменяет фиксированное присвоение адреса IPv4 и классов сети (A, B, C, D, E). Разделение основано на маске подсети или так называемом `CIDR suffix`, что позволяет поразрядно разделить адресное пространство IPv4 и, таким образом, на `subnets` любого размера. `CIDR suffix` указывает, сколько бит с начала IPv4-адреса принадлежит сети. Это обозначение, обозначающее `subnet mask` указав количество `1`-биты в маске подсети.

Давайте в качестве примера возьмем следующий адрес IPv4 и маску подсети:

- IPv4-адрес: `192.168.10.39`
    
- Маска подсети: `255.255.255.0`
    

Теперь полное представление IPv4-адреса и маски подсети будет выглядеть так:

- CIDR: `192.168.10.39/24`

Таким образом, суффикс CIDR представляет собой сумму всех единиц в маске подсети.

```shell-session
Octet:             1st         2nd         3rd         4th
Binary:         1111 1111 . 1111 1111 . 1111 1111 . 0000 0000 (/24)
Decimal:           255    .    255    .    255    .     0
```