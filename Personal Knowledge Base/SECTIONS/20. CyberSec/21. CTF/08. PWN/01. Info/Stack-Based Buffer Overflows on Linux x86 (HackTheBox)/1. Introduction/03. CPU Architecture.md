
# CPU Architecture

Архитектура `Von-Neumann` был разработан венгерским математиком Джоном фон Нейманом и состоит из четырех функциональных блоков:

- `Memory`
- `Control Unit`
- `Arithmetical Logical Unit`
- `Input/Output Unit`

В архитектуре фон Неймана наиболее важными единицами являются `Arithmetical Logical Unit` ( `ALU`) и `Control Unit` ( `CU`), объединяются в фактические `Central Processing Unit` ( `CPU`). `CPU` несет ответственность за выполнение `instructions` и для `flow control`. Инструкции выполняются одна за другой, шаг за шагом. Команды и данные извлекаются из памяти с помощью `CU`. Связь между процессором, памятью и устройством ввода/вывода называется `bus system`, который не упоминается в оригинальной архитектуре фон Неймана, но играет важную роль на практике. В архитектуре фон Неймана все инструкции и данные передаются через `bus system`.

#### Von-Neumann Architecture

![[Pasted image 20240806013819.png]]

## Memory

Память можно разделить на две категории:

- `Primary Memory`
- `Secondary Memory`

---

#### Primary Memory

Основная память (`primary memory`) - это кэш (`Cache`) и `Random Access Memory` (RAM). Если рассуждать логически, память - это не что иное, как место для хранения информации. Мы можем представить, что оставляем что-то у кого-то из наших друзей, чтобы забрать это позже. Но для этого необходимо знать адрес друга, чтобы забрать то, что мы оставили. Это то же самое, что и ОЗУ. ОЗУ описывает тип памяти, к выделениям памяти которого можно обращаться напрямую и случайным образом по их адресам в памяти.

Кэш-память встроена в процессор и служит буфером, который в лучшем случае гарантирует, что в процессор всегда будут поступать данные и программный код. Прежде чем программный код и данные поступят в процессор для обработки, оперативная память служит хранилищем данных. Объем оперативной памяти определяет объем данных, который может быть сохранен для процессора. Однако при отключении питания основной памяти все сохраненное содержимое теряется.

---

#### Secondary Memory

Вторичная память (`secondary memory`) - это внешнее хранилище данных, например `HDD/SSD`, `Flash Drives` и `CD/DVD-ROMs` компьютера, который `not` доступ к которому осуществляется напрямую со стороны ЦП, но через `I/O`интерфейсы. Другими словами, это запоминающее устройство. Он используется для постоянного хранения данных, которые в данный момент не нуждаются в обработке. По сравнению с `primary memory`, он имеет большую емкость, может хранить данные постоянно даже без источника питания и работает намного медленнее.

---

## Control Unit

The `Control Unit` ( `CU`) отвечает за корректное взаимодействие отдельных частей процессора. Внутреннее шинное соединение используется для задач `CU`. Задачи `CU` можно резюмировать следующим образом:

- Чтение данных из оперативной памяти
- Сохранение данных в оперативной памяти
- Предоставить, декодировать и выполнить инструкцию
- Обработка входных данных от периферийных устройств
- Обработка выходов на периферийные устройства
- Управление прерываниями
- Мониторинг всей системы

The `CU` содержит `Instruction Register` ( `IR`), который содержит все инструкции, которые процессор декодирует и выполняет соответствующим образом. Декодер инструкций транслирует инструкции и передает их исполнительному блоку, который затем выполняет инструкцию. Исполнительный блок передает данные в `ALU`для расчета и получает результат оттуда. Данные, используемые во время выполнения, временно сохраняются в `registers`.

---

## Central Processing Unit

The `Central Processing Unit` ( `CPU`) — это функциональная единица компьютера, обеспечивающая фактическую вычислительную мощность. Он отвечает за обработку информации и контроль операций обработки. Для этого `CPU` извлекает команды из памяти одну за другой и инициирует обработку данных.

Процессор также часто называют `Microprocessor` при размещении в одной электронной схеме, как в наших ПК.

Каждый `CPU`имеет архитектуру, на которой он был построен. Самый известный `CPU architectures` являются:

- `x86`/ `i386` - (AMD и Intel)
- `x86-64`/ `amd64` - (Майкрософт и Сан)
- `ARM` - (Желудь)

Каждая из этих архитектур ЦП построена особым образом, называемым `Instruction Set Architecture` ( `ISA`), который ЦП использует для выполнения своих процессов. `ISA`Таким образом, описывает поведение ЦП относительно используемого набора команд. Наборы инструкций определены так, что они независимы от конкретной реализации. Прежде всего, ISA дает нам возможность понять единое поведение `machine code` в `assembly language` касательно `registers`, `data types`, и т. д.

Существует четыре различных типа `ISA`:

- `CISC` - `Complex Instruction Set Computing`
- `RISC` - `Reduced Instruction Set Computing`
- `VLIW` - `Very Long Instruction Word`
- `EPIC` - `Explicitly Parallel Instruction Computing`

---
#### RISC

`RISC` означает `Reduced Instruction Set Computer`, конструкция архитектуры микропроцессоров, целью которой было упростить набор команд для программирования на ассемблере до одного такта. Это приводит к повышению тактовой частоты ЦП, но обеспечивает более быстрое выполнение, поскольку используются меньшие наборы команд. Под набором команд мы подразумеваем набор машинных инструкций, которые может выполнить данный процессор. Мы можем найти `RISC`например, в большинстве современных смартфонов. Тем не менее, почти все процессоры имеют часть `RISC` в них. `RISC` архитектуры имеют фиксированную длину инструкций, определяемую как `32-bit` и `64-bit`.

---
#### CISC

В отличие от RISC, `Complex Instruction Set Computer` ( `CISC`) — это архитектура процессора с обширным и сложным набором команд. Из-за исторического развития компьютеров и их памяти повторяющиеся последовательности инструкций были объединены в сложные инструкции в компьютерах второго поколения. Адресация в `CISC` архитектуры не требуют 32-битной или 64-битной архитектуры, в отличие от RISC, но могут быть выполнены с помощью `8-bit` режим.

---
#### Instruction Cycle

Набор команд описывает совокупность машинных инструкций процессора. Объем набора команд значительно варьируется в зависимости от типа процессора. Каждый процессор может иметь разные циклы команд и наборы команд, но все они схожи по структуре, которую мы можем резюмировать следующим образом:

| **Инструкция**                  | **Описание**                                                                                                                                                                                                                                                                                                     |
| ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `1. FETCH`                      | Адрес следующей машинной инструкции считывается из `Instruction Address Register` ( `IAR`). Затем он загружается из `Cache` или `RAM` в `Instruction Register` ( `IR`).                                                                                                                                          |
| `2. DECODE`                     | Декодер инструкций преобразует инструкции и запускает необходимые схемы для выполнения инструкции.                                                                                                                                                                                                               |
| `3. FETCH OPERANDS`             | Если для выполнения необходимо загрузить дополнительные данные, они загружаются из кэша или `RAM` в рабочие регистры.                                                                                                                                                                                            |
| `4. EXECUTE`                    | Инструкция выполнена. Это могут быть, например, операции в `ALU`, переход в программу, запись результатов в рабочие регистры или управление периферийными устройствами. В зависимости от результата некоторых инструкций устанавливается регистр состояния, который может быть оценен последующими инструкциями. |
| `5. UPDATE INSTRUCTION POINTER` | Если на этапе EXECUTE не была выполнена ни одна команда перехода, `IAR` теперь увеличивается на длину инструкции, так что оно указывает на следующую машинную инструкцию.                                                                                                                                        |
