
# Connecting Using VPN

Тестирование на проникновение/взлом — это огромная область. На протяжении всей нашей карьеры мы будем сталкиваться с бесчисленными технологиями. Вот некоторые из наиболее распространенных терминов и технологий, с которыми мы будем сталкиваться неоднократно и которые необходимо хорошо усвоить. Это не исчерпывающий список, но его достаточно, чтобы начать работу с базовыми модулями и простыми блоками HTB.

---
## What is a Shell?

`Shell`– это очень распространенный термин, который мы будем слышать снова и снова во время нашего путешествия. Оно имеет несколько значений. В системе Linux оболочка — это программа, которая принимает вводимые пользователем данные с клавиатуры и передает эти команды операционной системе для выполнения определенной функции. На заре вычислительной техники оболочка была единственным доступным интерфейсом для взаимодействия с системами. С тех пор появилось гораздо больше типов и версий операционных систем, а также графический интерфейс пользователя (GUI), дополняющий интерфейсы командной строки (оболочки), такие как терминал Linux, командная строка Windows (cmd.exe) и Windows PowerShell. .

Большинство систем Linux используют программу под названием [Bash (Bourne Again Shell)](https://www.gnu.org/savannah-checkouts/gnu/bash/manual/bash.html) в качестве программы-оболочки для взаимодействия с операционной системой. Bash — это расширенная версия [sh](https://man7.org/linux/man-pages/man1/sh.1p.html) , оригинальной программы оболочки Unix-систем. Помимо `bash` существуют также другие оболочки, включая, помимо прочего, [Zsh](https://en.wikipedia.org/wiki/Z_shell) , [Tcsh](https://en.wikipedia.org/wiki/Tcsh) , [Ksh](https://en.wikipedia.org/wiki/KornShell) , [Fishshell](https://en.wikipedia.org/wiki/Fish_(Unix_shell)) и т. д.

Мы часто читаем или слышим, как другие говорят о «установке оболочки» на коробку (систему). Это означает, что целевой хост был взломан, и мы получили доступ на уровне оболочки (обычно `bash` или `sh`) и может запускать команды в интерактивном режиме, как если бы мы вошли в систему на хосте. Оболочку можно получить, воспользовавшись уязвимостью веб-приложения или сети/службы или получив учетные данные и удаленно войдя на целевой хост. Существует три основных типа соединений оболочки:

|**Тип корпуса**|**Описание**|
|---|---|
|`Reverse shell`|Инициирует обратное соединение со «слушателем» на нашем блоке атаки.|
|`Bind shell`|«Привязывается» к определенному порту на целевом хосте и ждет подключения от нашего атакующего устройства.|
|`Web shell`|Запускает команды операционной системы через веб-браузер, обычно не интерактивно или полуинтерактивно. Его также можно использовать для запуска отдельных команд (например, использования уязвимости загрузки файлов и загрузки файла). `PHP` скрипт для запуска одной команды.|

У каждого типа оболочки есть свой вариант использования, и точно так же, как существует множество способов получить оболочку, вспомогательная программа, которую мы используем для получения оболочки, может быть написана на многих языках ( `Python`, `Perl`, `Go`, `Bash`, `Java`, `awk`, `PHP`, и т. д.). Это могут быть небольшие сценарии или более крупные и сложные программы, облегчающие соединение целевого хоста с нашей атакующей системой и получение доступа к «оболочке». Доступ к оболочке будет подробно обсуждаться в следующем разделе.

---
## What is a Port?

Порт [.](https://en.wikipedia.org/wiki/Port_(computer_networking)) можно рассматривать как окно или дверь в доме (дом является удаленной системой). Если окно или дверь оставлены открытыми или неправильно заперты, мы часто можем получить несанкционированный доступ к дому Это похоже на вычисления. Порты — это виртуальные точки, где начинаются и заканчиваются сетевые соединения. Они основаны на программном обеспечении и управляются операционной системой хоста. Порты связаны с определенным процессом или службой и позволяют компьютерам различать разные типы трафика (трафик SSH поступает на другой порт, чем веб-запросы на доступ к веб-сайту, даже если запросы на доступ отправляются через одно и то же сетевое соединение).

Каждому порту присвоен номер, и многие из них стандартизированы для всех подключенных к сети устройств (хотя службу можно настроить для работы на нестандартном порту). Например, `HTTP` сообщения (трафик веб-сайта) обычно идут в порт `80`, пока `HTTPS` сообщения идут в порт `443`если не настроено иначе. Мы встретим веб-приложения, работающие на нестандартных портах, но обычно находим их на портах 80 и 443. Номера портов позволяют нам получить доступ к определенным службам или приложениям, работающим на целевых устройствах. На очень высоком уровне порты помогают компьютерам понять, как обрабатывать различные типы данных, которые они получают.

Существует две категории портов: [протокол управления передачей (TCP)](https://en.wikipedia.org/wiki/Transmission_Control_Protocol) и [протокол пользовательских дейтаграмм (UDP)](https://en.wikipedia.org/wiki/User_Datagram_Protocol) .  
`TCP`ориентирован на соединение, то есть перед отправкой данных должно быть установлено соединение между клиентом и сервером. Сервер должен находиться в состоянии прослушивания и ожидать запросов на соединение от клиентов.  
`UDP`использует модель связи без установления соединения. Здесь нет «рукопожатия», что вносит определенную ненадежность, поскольку нет гарантии доставки данных. `UDP` полезно, когда исправление/проверка ошибок не требуется или выполняется самим приложением. `UDP` подходит для приложений, выполняющих срочные задачи, поскольку отбрасывание пакетов происходит быстрее, чем ожидание задержанных пакетов из-за повторной передачи, как в случае с `TCP`и может существенно повлиять на систему реального времени. Есть `65,535` `TCP` порты и `65,535` другой `UDP`порты, каждый из которых обозначен номером. Некоторые из наиболее известных `TCP` и `UDP` порты перечислены ниже:

| Порт(ы)          | Протокол                |
| ---------------- | ----------------------- |
| `20`/ `21` (TCP) | `FTP`                   |
| `22` (TCP)       | `SSH`                   |
| `23` (TCP)       | `Telnet`                |
| `25` (TCP)       | `SMTP`                  |
| `80` (TCP)       | `HTTP`                  |
| `161` (TCP/UDP)  | `SNMP`                  |
| `389` (TCP/UDP)  | `LDAP`                  |
| `443` (TCP)      | `SSL`/ `TLS` ( `HTTPS`) |
| `445` (TCP)      | `SMB`                   |
| `3389` (TCP)     | `RDP`                   |

Как профессионалы в области информационной безопасности, мы должны иметь возможность быстро запоминать большие объемы информации по широкому кругу тем. Нам, особенно пентестерам, очень важно иметь четкое представление о многих `TCP` и `UDP` порты и иметь возможность быстро распознавать их только по номеру (т. е. знать, что порт `21` является `FTP`, порт `80` является `HTTP`, порт `88` является `Kerberos`) без необходимости искать его. Это придет с практикой и повторением и в конечном итоге станет нашей второй натурой, поскольку мы будем атаковать все больше ящиков, лабораторий и реальных сетей и помогать нам работать более эффективно и лучше расставлять приоритеты в наших усилиях по подсчету и атаках.

Такие руководства, как [это](https://www.stationx.net/common-ports-cheat-sheet/) и [это,](https://packetlife.net/media/library/23/common-ports.pdf) являются отличными ресурсами для изучения стандартных и менее распространенных портов TCP и UDP. Поставьте себе задачу запомнить как можно больше из них и провести небольшое исследование каждого из протоколов, перечисленных в таблице выше. Это отличный [указатель](https://nullsec.us/top-1-000-tcp-and-udp-ports-nmap-default/) на топ-1000 `TCP` и `UDP` порты из `nmap` наряду со 100 лучшими сервисами, просканированными `nmap`.

---

## What is a Web Server

Веб-сервер — это приложение, работающее на внутреннем сервере и обрабатывающее всю `HTTP`трафик из клиентского браузера, направляет его на целевые страницы запросов и, наконец, отвечает клиентскому браузеру. Веб-серверы обычно работают на TCP-портах. `80` или `443`и отвечают за подключение конечных пользователей к различным частям веб-приложения, а также обработку их различных ответов:

![[Pasted image 20240804065709.png]]

Поскольку веб-приложения, как правило, открыты для публичного взаимодействия и выходят в Интернет, они могут привести к компрометации внутреннего сервера, если в них имеются какие-либо уязвимости. Веб-приложения могут предоставлять обширную поверхность для атак, что делает их ценной целью для злоумышленников и пентестеров.

Многие типы уязвимостей могут затронуть веб-приложения. Мы часто слышим/видим ссылки на [Топ-10 OWASP](https://owasp.org/www-project-top-ten/) . Это стандартизированный список 10 основных уязвимостей веб-приложений, поддерживаемый Open Web Application Security Project (OWASP). Этот список считается 10 наиболее опасными уязвимостями и не является исчерпывающим списком всех возможных уязвимостей веб-приложений. Методологии оценки безопасности веб-приложений часто основаны на топ-10 OWASP в качестве отправной точки для основных категорий недостатков, которые должен проверять оценщик. Текущий список Топ-10 OWASP выглядит так:

|Число|Категория|Описание|
|---|---|---|
|1.|[Нарушенный контроль доступа](https://owasp.org/Top10/A01_2021-Broken_Access_Control/)|Ограничения не реализованы должным образом, чтобы предотвратить доступ пользователей к учетным записям других пользователей, просмотр конфиденциальных данных, доступ к несанкционированным функциям, изменение данных и т. д.|
|2.|[Криптографические сбои](https://owasp.org/Top10/A02_2021-Cryptographic_Failures/)|Сбои, связанные с криптографией, которые часто приводят к раскрытию конфиденциальных данных или компрометации системы.|
|3.|[Инъекция](https://owasp.org/Top10/A03_2021-Injection/)|Данные, предоставленные пользователем, не проверяются, не фильтруются и не очищаются приложением. Некоторыми примерами внедрения являются внедрение SQL, внедрение команд, внедрение LDAP и т. д.|
|4.|[Небезопасный дизайн](https://owasp.org/Top10/A04_2021-Insecure_Design/)|Эти проблемы возникают, когда приложение разработано без учета требований безопасности.|
|5.|[Неправильная конфигурация безопасности](https://owasp.org/Top10/A05_2021-Security_Misconfiguration/)|Отсутствие соответствующего усиления безопасности в любой части стека приложений, небезопасные конфигурации по умолчанию, открытое облачное хранилище, подробные сообщения об ошибках, которые раскрывают слишком много информации.|
|6.|[Уязвимые и устаревшие компоненты](https://owasp.org/Top10/A06_2021-Vulnerable_and_Outdated_Components/)|Использование компонентов (как на стороне клиента, так и на стороне сервера), которые уязвимы, не поддерживаются или устарели.|
|7.|[Сбои идентификации и аутентификации](https://owasp.org/Top10/A07_2021-Identification_and_Authentication_Failures/)|Атаки, связанные с аутентификацией, нацелены на идентификацию пользователя, аутентификацию и управление сеансами.|
|8.|[Нарушения целостности программного обеспечения и данных](https://owasp.org/Top10/A08_2021-Software_and_Data_Integrity_Failures/)|Нарушения целостности программного обеспечения и данных относятся к коду и инфраструктуре, которые не защищают от нарушений целостности. Примером этого является ситуация, когда приложение использует плагины, библиотеки или модули из ненадежных источников, репозиториев и сетей доставки контента (CDN).|
|9.|[Сбои ведения журнала безопасности и мониторинга](https://owasp.org/Top10/A09_2021-Security_Logging_and_Monitoring_Failures/)|Эта категория предназначена для помощи в обнаружении, эскалации и реагировании на активные нарушения. Без регистрации и мониторинга нарушения невозможно обнаружить.|
|10.|[Подделка запроса на стороне сервера](https://owasp.org/Top10/A10_2021-Server-Side_Request_Forgery_%28SSRF%29/)|Ошибки SSRF возникают всякий раз, когда веб-приложение извлекает удаленный ресурс без проверки URL-адреса, предоставленного пользователем. Это позволяет злоумышленнику заставить приложение отправить созданный запрос в неожиданный пункт назначения, даже если оно защищено брандмауэром, VPN или другим типом списка управления доступом к сети (ACL).|

Крайне важно ознакомиться с каждой из этих категорий и различными уязвимостями, которые соответствуют каждой из них. Уязвимости веб-приложений будут подробно рассмотрены в последующих модулях. Чтобы узнать больше о веб-приложениях, ознакомьтесь с [модулем «Введение в веб-приложения»](https://academy.hackthebox.com/module/details/75) .
