
# Getting Started with a Pentest Distro

Любой, кто хочет начать технический путь в области информационной безопасности, должен освоиться с широким спектром технологий и операционных систем. Как тестеры на проникновение, мы должны понимать, как настраивать, обслуживать и защищать машины для атак как на Linux, так и на Windows. В зависимости от клиентской среды или объема оценки мы можем использовать виртуальную машину Linux или Windows на нашем компьютере, нашу базовую операционную систему, облачный Linux-бокс, виртуальную машину, установленную в среде клиента, или даже выполнять тестирование непосредственно с клиента. - собственная рабочая станция для имитации внутренней угрозы (предположим сценарий взлома).

---
## Choosing a Distro

Существует множество дистрибутивов Linux для тестирования на проникновение. Существует довольно много уже существующих дистрибутивов на основе Debian, в которых предварительно загружено множество инструментов, необходимых нам для выполнения наших оценок. Многие из этих инструментов требуются редко, и ни один дистрибутив не содержит всех инструментов, необходимых для выполнения наших оценок. По мере того, как мы учимся и продвигаемся по карьерной лестнице, мы будем тяготеть к конкретным инструментам и иметь список «обязательных вещей», которые можно добавить в новый дистрибутив. По мере продвижения мы можем даже предпочесть полностью настроить нашу собственную виртуальную машину для пентестирования из базового образа Debian или Ubuntu, но создание полностью настраиваемой виртуальной машины выходит за рамки этого модуля.

Выбор дистрибутива индивидуален, и, как уже упоминалось, мы можем даже создать и поддерживать свой собственный с нуля. Существует бесчисленное множество дистрибутивов Linux, которые служат различным целям: некоторые специально настроены для тестирования на проникновение, другие предназначены для тестирования на проникновение веб-приложений, криминалистики и т. д.

В этом разделе будет рассмотрена настройка и работа с [Parrot OS](https://www.parrotsec.org/) . Этот дистрибутив используется для Pwnbox, который мы увидим в Академии и настроенного для отработки и решения упражнений в различных модулях, с которыми мы сталкиваемся.

![[Pasted image 20240804064655.png]]

Важно отметить, что каждый тест на проникновение или оценку безопасности должен выполняться на только что установленной виртуальной машине, чтобы избежать случайного включения в наши отчеты важных для безопасности сведений из другой клиентской среды или сохранения конфиденциальных данных клиента в течение значительного периода времени. По этой причине мы должны иметь возможность быстро установить новую машину для пентеста и иметь процессы (автоматизация, сценарии, подробные процедуры и т. д.) для быстрой настройки выбранного нами дистрибутива(ов) для каждой выполняемой нами оценки.

---
## Setting Up a Pentest Distro

Есть много способов настроить наш локальный дистрибутив для пентеста. Мы можем установить его в качестве базовой операционной системы (хотя это не рекомендуется), настроить нашу рабочую станцию ​​на двойную загрузку (переключение между операционными системами требует много времени) или установить с использованием виртуализации.

Нам доступно довольно много вариантов: [Hyper-V](https://docs.microsoft.com/en-us/virtualization/hyper-v-on-windows/about/) в Windows, как виртуальные машины на [голых гипервизорах](https://www.vmware.com/topics/bare-metal-hypervisor) , таких как [Proxmox](https://proxmox.com/en/) или [VMware ESXi](https://www.vmware.com/products/esxi-and-esx.html) , или использование бесплатных гипервизоров, таких как [VirtualBox](https://www.virtualbox.org) или [VMware Workstation Player](https://www.vmware.com/products/workstation-player.html) , которые можно установить и использовать в качестве гипервизоров. в операционных системах Windows и Linux.  
Другой вариант — [VMware Workstation](https://www.vmware.com/products/workstation-pro.html) , который требует платной лицензии, но предлагает гораздо больше функций, чем бесплатные варианты.

А `hypervisor`это программное обеспечение, которое позволяет нам создавать и запускать виртуальные машины (VM). Это позволит нам использовать наш хост-компьютер (настольный компьютер или ноутбук) для запуска нескольких виртуальных машин, виртуально разделяя память и ресурсы обработки.  
Виртуальные машины на гипервизоре работают изолированно от основной операционной системы, что обеспечивает уровень изоляции и защиты между нашей производственной сетью и уязвимыми сетями, такими как Hack The Box, или при подключении к клиентским средам из виртуальной машины (хотя уязвимости виртуальной машины все же возникают). временами).

В зависимости от количества ресурсов, которыми располагает наша хост-система (т. е. оперативной памяти), мы обычно можем запускать несколько виртуальных машин одновременно. Часто бывает полезно включить виртуальную машину во время оценки, чтобы протестировать эксплойт, или попытаться воссоздать целевое приложение и готовые машины в лабораторной среде, чтобы протестировать новейшие инструменты, эксплойты и методы. Каждый, кто занимается технической информационной безопасностью, должен уметь работать с одним или несколькими гипервизорами и грамотно создавать виртуальные машины как для работы, так и для практики.

Чтобы добиться успеха, мы должны постоянно работать над совершенствованием своего мастерства. Отличный способ — создать домашнюю лабораторию, чтобы попытаться воспроизвести уязвимости, настроить уязвимые приложения и службы, увидеть последствия рекомендаций по исправлению и иметь безопасное место для отработки новых методов атак/эксплойтов. Мы можем построить нашу лабораторию на старом ноутбуке или настольном компьютере, но желательно использовать сервер для установки «голого» гипервизора.

Для наших целей мы будем использовать модифицированную версию Parrot Security (Pwnbox), доступную [здесь,](https://www.parrotsec.org/download/) для создания локальной виртуальной машины. Мы можем выбрать два формата:

- `Optical disc image (ISO)`
- `Open Virtual Appliance (OVA)`

### ISO

The `ISO`По сути, файл представляет собой просто компакт-диск, который можно смонтировать в выбранный нами гипервизор для создания виртуальной машины, самостоятельно установив операционную систему. Ан `ISO` дает нам больше возможностей для настройки, например раскладки клавиатуры, языкового стандарта, переключения среды рабочего стола, пользовательского разделения и т. д., и, следовательно, более детальный подход при настройке нашей виртуальной машины для атаки.

### OVA

The `OVA` файл представляет собой предварительно созданное виртуальное устройство, содержащее `OVF` XML-файл, в котором указаны настройки оборудования виртуальной машины и `VMDK`, который представляет собой виртуальный диск, на котором установлена ​​операционная система. Ан `OVA` предварительно создан и поэтому может быть быстро развернут, чтобы быстрее приступить к работе.

После запуска мы можем начать изучать операционную систему, знакомиться с инструментами и выполнять любые необходимые настройки. Команда Parrot Linux поддерживает разнообразную полезную документацию:

- [Что такое попугай?](https://www.parrotsec.org/docs/introduction/what-is-parrot)
- [Монтаж](https://www.parrotsec.org/docs/installation/)
- [Конфигурация](https://www.parrotsec.org/docs/configuration/parrot-software-management)

Для остальных вопросов команда Parrot поддерживает [форум](https://community.parrotsec.org/c/support/6) .

---

## Practicing with Parrot

Мы встретим Parrot Linux по всей Академии. Браузерная версия, или Pwnbox, доступна в любых разделах модуля, требующих взаимодействия с целевым хостом в нашей лабораторной среде. Нажмите кнопку `Start Instance`кнопку ниже и начните знакомиться с Pwnbox. Все разделы интерактивного модуля можно заполнить на нашей собственной виртуальной машине после создания образа Docker или создания целевого хоста или нескольких хостов и загрузки ключа VPN. Использование Pwnbox не является обязательным, но полезно, поскольку всю работу Академии можно выполнить в нашем браузере, не требуя какого-либо программного обеспечения для виртуализации или дополнительных ресурсов для запуска виртуальной машины.

Доступ к экземплярам Docker можно получить, не требуя отдельного VPN-соединения. Определенным хостам (т. е. целевым объектам Active Directory) требуется доступ к VPN, если к ним нет доступа из Pwnbox. В этом случае после создания цели появится кнопка для загрузки ключа VPN. Мы начнем работать с целевыми хостами позже в этом модуле.
