Компьютер тоже можно назвать машиной, только вместо паровой силы здесь электричество. Но программирование сделало компьютер таким же простым, как любой инструмент.

![[Pasted image 20220819063539.png]]


![[Pasted image 20220819063607.png]]

Процессор — это сердце/мозг любого компьютера. Его основное назначение — арифметические и логические операции, и прежде чем погрузиться в дебри процессора, нужно разобраться в его основных компонентах и принципах их работы.


АЛУ – Арифметико-логическое устройство. 

БУ – Блок управления - определяет последовательность микро команд
Выполняемые при обработке машинных команд.

Регистр — минимальная ячейка памяти данных. Регистры состоят из триггеров.

Триггеры, в свою очередь, состоят из логических элементов и могут хранить в себе 1 бит информации.

## Два основных компонента процессора

### Устройство управления

Устройство управления (УУ) помогает процессору контролировать и выполнять инструкции. УУ сообщает компонентам, что именно нужно делать. В соответствии с инструкциями он координирует работу с другими частями компьютера, включая второй основной компонент — арифметико-логическое устройство (АЛУ). Все инструкции вначале поступают именно на устройство управления.

Существует два типа реализации УУ:

-   **УУ на жёсткой логике** (англ. hardwired control units). Характер работы определяется внутренним электрическим строением — устройством печатной платы или кристалла. Соответственно, модификация такого УУ без физического вмешательства невозможна.
-   **УУ с микропрограммным управлением** (англ. microprogrammable control units). Может быть запрограммирован для тех или иных целей. Программная часть сохраняется в памяти УУ.

УУ на жёсткой логике быстрее, но УУ с микропрограммным управлением обладает более гибкой функциональностью.

### Арифметико-логическое устройство

Это устройство, как ни странно, выполняет все арифметические и логические операции, например сложение, вычитание, логическое ИЛИ и т. п. АЛУ состоит из логических элементов, которые и выполняют эти операции.

Большинство логических элементов имеют два входа и один выход.

Ниже приведена схема полусумматора, у которой два входа и два выхода. A и B здесь являются входами, S — выходом, C — переносом (в старший разряд).

![[Half_Adder 1.webp]]


## Хранение информации — регистры и память

Как говори![[Pasted image 20220819063539.png]]лось ранее, процессор выполняет поступающие на него команды. Команды в большинстве случаев работают с данными, которые могут быть промежуточными, входными или выходными. Все эти данные вместе с инструкциями сохраняются в регистрах и памяти.

### Регистры

Регистр — минимальная ячейка памяти данных. Регистры состоят из триггеров (англ. latches/flip-flops). Триггеры, в свою очередь, состоят из логических элементов и могут хранить в себе 1 бит информации.

Прим. перев. Триггеры могут быть синхронные и асинхронные. Асинхронные могут менять своё состояние в любой момент, а синхронные только во время положительного/отрицательного перепада на входе синхронизации.

По функциональному назначению триггеры делятся на несколько групп:

-   RS-триггер: сохраняет своё состояние при нулевых уровнях на обоих входах и изменяет его при установке единице на одном из входов (Reset/Set — Сброс/Установка).
-   JK-триггер: идентичен RS-триггеру за исключением того, что при подаче единиц сразу на два входа триггер меняет своё состояние на противоположное (счётный режим).
-   T-триггер: меняет своё состояние на противоположное при каждом такте на его единственном входе.
-   D-триггер: запоминает состояние на входе в момент синхронизации. Асинхронные D-триггеры смысла не имеют.

Для хранения промежуточных данных ОЗУ не подходит, т. к. это замедлит работу процессора. Промежуточные данные отсылаются в регистры по шине. В них могут храниться команды, выходные данные и даже адреса ячеек памяти.

![[1_5WDU45YAH5CnICZOOvn1Yw.gif]]

### Память (ОЗУ)

ОЗУ (оперативное запоминающее устройство, англ. RAM) — это большая группа этих самых регистров, соединённых вместе. Память у такого хранилища непостоянная и данные оттуда пропадают при отключении питания. ОЗУ принимает адрес ячейки памяти, в которую нужно поместить данные, сами данные и флаг записи/чтения, который приводит в действие триггеры.

Прим. перев. Оперативная память бывает статической и динамической — SRAM и DRAM соответственно. В статической памяти ячейками являются триггеры, а в динамической — конденсаторы. SRAM быстрее, а DRAM дешевле.

## Команды (инструкции)

Команды — это фактические действия, которые компьютер должен выполнять. Они бывают нескольких типов:

-   **Арифметические**: сложение, вычитание, умножение и т. д.
-   **Логические**: И (логическое умножение/конъюнкция), ИЛИ (логическое суммирование/дизъюнкция), отрицание и т. д.
-   **Информационные**: `move`, `input`, `outptut`, `load` и `store`.
-   **Команды перехода**: `goto`, `if ... goto`, `call` и `return`.
-   **Команда останова**: `halt`.

Прим. перев. На самом деле все арифметические операции в АЛУ могут быть созданы на основе всего двух: сложение и сдвиг. Однако чем больше базовых операций поддерживает АЛУ, тем оно быстрее.

Инструкции предоставляются компьютеру на языке ассемблера или генерируются компилятором высокоуровневых языков.

В процессоре инструкции реализуются на аппаратном уровне. За один такт одноядерный процессор может выполнить одну элементарную (базовую) инструкцию.

Группу инструкций принято называть набором команд (англ. instruction set).


## Тактирование процессора

Повторение колебаний означает, что колебательный процесс происходит с постоянной периодичностью или частотой. Это означает, что система переходит через один полный цикл колебаний и возвращается в исходное состояние. Повторение колебаний измеряется в герцах (Гц) и обозначает количество полных циклов колебаний, происходящих в течение одной секунды.

Частоты могут относиться к различным областям, но в общем случае они измеряют количество повторений или колебаний в единицу времени. Например, в физике частота может относиться к количеству циклов колебаний звука или света в секунду и измеряется в герцах (Гц). В электронике и коммуникациях частота может относиться к скорости сигналов, измеряемой в гигагерцах (ГГц) или других единицах. Частоты также могут быть связаны с диапазонами радиоволн или сетевыми частотами. Работа с частотами может включать их генерацию, измерение, регулирование и анализ.

Частота процессора - это мера скорости выполнения операций процессором. Она измеряется в гигагерцах (ГГц). Чем выше частота процессора, тем быстрее он может выполнять задачи. Процессор работает в тактовом режиме: каждый такт представляет собой одну операцию, которую процессор может выполнить. Частота процессора определяет количество тактов, которые он может выполнить за секунду.

Для лучшего понимания, можно представить процессор как бегуна на треке, а частоту - это количество шагов, которые он может сделать за секунду. Чем больше шагов (частота), тем быстрее бегун (процессор) достигает финиша (завершает операции). Однако важно отметить, что частота процессора не является единственным фактором, определяющим производительность компьютера. Существуют и другие аспекты, такие как количество ядер процессора, архитектура процессора, кэш-память и другие факторы, которые также влияют на общую производительность системы.

Такт процессора — это единица измерения скорости работы процессора. Он представляет собой период времени, за который процессор выполняет одну операцию. Чем выше тактовая частота процессора, тем больше операций он способен выполнить за единицу времени.
Внутри процессора есть кварцевый резонатор, который генерирует электрические импульсы с постоянной частотой. Эти импульсы служат основой для работы процессора. Один такт состоит из нескольких фаз, и каждая фаза соответствует определенным операциям, таким как получение инструкции, выполнение вычислений или запись результатов.

В современных процессорах используется технология суперскалярной архитектуры, которая позволяет выполнять несколько операций одновременно внутри каждой фазы такта. Это повышает эффективность работы процессора и позволяет ему обрабатывать больше данных за такт.

Однако важно отметить, что тактовая частота не является единственным показателем производительности процессора. Различные архитектурные особенности, количество ядер и размер кэш-памяти также влияют на общую производительность системы. Простыми словами, такт процессора - это одна единица времени в работе процессора, во время которой он выполняет определенную операцию или инструкцию. Это базовая единица измерения скорости работы процессора, указывающая на скорость выполнения команд и операций в компьютере. 

Быстродействие компьютера определяется тактовой частотой его процессора. Тактовая частота — количество тактов (соответственно и исполняемых команд) за секунду. Частота нынешних процессоров измеряется в ГГц (Гигагерцы). 1 ГГц = 10⁹ Гц — миллиард операций в секунду. Чтобы уменьшить время выполнения программы, нужно либо оптимизировать (уменьшить) её, либо увеличить тактовую частоту. У части процессоров есть возможность увеличить частоту (разогнать процессор), однако такие действия физически влияют на процессор и нередко вызывают перегрев и выход из строя.

Частота переменного тока (ac) — это количество синусоидальных колебаний переменного тока в секунду. Частота — это количество изменений направления [тока](https://www.fluke.com/ru-ru/learn/blog/electrical/%D1%87%D1%82%D0%BE-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-%D1%81%D0%B8%D0%BB%D0%B0-%D1%82%D0%BE%D0%BA%D0%B0) за секунду. Для измерения частоты используется международная единица герц (Гц). 1 герц равен 1 колебанию в секунду.

- Герц (Гц) = 1 герц равен 1 колебанию в секунду.
- Колебание = Одна полная волна переменного тока или [напряжения](https://www.fluke.com/ru-ru/learn/blog/electrical/%D1%87%D1%82%D0%BE-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-%D0%BD%D0%B0%D0%BF%D1%80%D1%8F%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5).
- Полупериод = Половина колебания.
- Период = Время, необходимое для выполнения одного полного колебания.

Частота отражает повторяемость процессов. С точки зрения электрического тока частота — это количество повторений синусоиды или, другими словами, полного колебания, которое включает положительную и отрицательную составляющие.

Чем больше колебаний происходит в секунду, тем выше частота.

**Пример.** Если известно, что частота переменного тока равна 5 Гц (см. схему ниже), это означает, что его форма сигнала повторяется 5 раз за 1 секунду.

![[Pasted image 20230713113241.png]]

Частота обычно используется для описания работы электрооборудования. Ниже приведены некоторые наиболее распространенные диапазоны частот:

- Частота линии питания (обычно 50 Гц или 60 Гц).
- Частотно-регулируемые приводы: обычно используют несущую частоту 1–20 кГц.
- Звуковой диапазон частот: от 15 Гц до 20 кГц (диапазон человеческого слуха).
- Радиочастота: от 30 до 300 кГц.
- Низкая частота: от 300 кГц до 3 МГц.
- Средняя частота: от 3 до 30 МГц.
- Высокая частота: от 30 до 300 кГц.

Обычно цепи и оборудование предназначены для работы с постоянной или переменной частотой. Оборудование, рассчитанное на работу с постоянной частотой, при изменении частоты начинает работать неправильно. Например, двигатель переменного тока, рассчитанный на работу при 60 Гц, работает медленнее при частоте ниже 60 Гц или быстрее при частоте выше 60 Гц. Для двигателей переменного тока любое изменение частоты приводит к пропорциональному изменению частоты вращения двигателя. Другим примером является снижение частоты вращения двигателя на 5 % при снижении частоты сети на 5 %.

### Порядок измерения частоты

[Цифровой мультиметр](https://www.fluke.com/ru-ru/products/electrical-testing/digital-multimeters) с режимом частотомера может измерять частоту сигналов переменного тока со следующими функциями:

- регистрация МИН/МАКС значений, позволяющая записывать результаты измерений частоты за заданный интервал времени. Эта функция также применима к измерениям напряжения, тока и [сопротивления](https://www.fluke.com/ru-ru/learn/blog/electrical/%D1%87%D1%82%D0%BE-%D1%82%D0%B0%D0%BA%D0%BE%D0%B5-%D1%81%D0%BE%D0%BF%D1%80%D0%BE%D1%82%D0%B8%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5).
- автоматический выбор диапазона, при котором прибор автоматически подбирает диапазон частот при условии, что частота измеряемого напряжения не выходит за пределы этого диапазона.

Параметры электросетей различаются в зависимости от страны. В США работа сети основана на высокостабильном сигнале с частотой 60 Гц, что соответствует 60 колебаниям в секунду.

Бытовые электросети в США получают питание от однофазного источника питания 120 В перем. тока. Напряжение в настенной розетке дома в США совершает синусоидальные колебания в диапазоне от 170 до −170 В, при этом [истинное среднеквадратичное](https://www.fluke.com/ru-ru/learn/blog/electrical/what-is-true-rms) значение этого напряжения будет равно 120 вольт. Частота колебаний составляет 60 циклов в секунду.

Единица измерения получила название «герц» в честь немецкого физика Генриха Герца (1857–1894 гг.), который первым осуществил передачу и принятие радиоволн. Радиоволны распространяются с частотой одно колебание в секунду (1 Гц). (аналогично часы тикают с частотой 1 Гц)

Измерение частоты f сигнала. Частота – число колебаний за одну секунду. Частота – величина обратно пропорциональная периоду колебаний.

![[22-03-Auto_freq_ru.gif]]


## Выполнение инструкций

Инструкции хранятся в ОЗУ в последовательном порядке. Для гипотетического процессора инструкция состоит из кода операции и адреса памяти/регистра. Внутри управляющего устройства есть два регистра инструкций, в которые загружается код команды и адрес текущей исполняемой команды. Ещё в процессоре есть дополнительные регистры, которые хранят в себе последние 4 бита выполненных инструкций.

Ниже рассмотрен пример набора команд, который суммирует два числа:

1.  `LOAD_A 8`. Это команда сохраняет в ОЗУ данные, скажем, `<1100 1000>`. Первые 4 бита — код операции. Именно он определяет инструкцию. Эти данные помещаются в регистры инструкций УУ. Команда декодируется в инструкцию `load_A` — поместить данные `1000` (последние 4 бита команды) в регистр `A`.
2.  `LOAD_B 2`. Ситуация, аналогичная прошлой. Здесь помещается число 2 (`0010`) в регистр `B`.
3.  `ADD B A`. Команда суммирует два числа (точнее прибавляет значение регистра `B` в регистр `A`). УУ сообщает АЛУ, что нужно выполнить операцию суммирования и поместить результат обратно в регистр `A`.
4.  `STORE_A 23`. Сохраняем значение регистра `A` в ячейку памяти с адресом `23`.

Вот такие операции нужны, чтобы сложить два числа.

## Шина

Все данные между процессором, регистрами, памятью и I/O-устройствами (устройствами ввода-вывода) передаются по шинам. Чтобы загрузить в память только что обработанные данные, процессор помещает адрес в шину адреса и данные в шину данных. Потом нужно дать разрешение на запись на шине управления.

![[1_N5wkXycN_ceV9HByxQUzCA.webp]]

## Кэш

У процессора есть механизм сохранения инструкций в кэш. Как мы выяснили ранее, за секунду процессор может выполнить миллиарды инструкций. Поэтому если бы каждая инструкция хранилась в ОЗУ, то её изъятие оттуда занимало бы больше времени, чем её обработка. Поэтому для ускорения работы процессор хранит часть инструкций и данных в кэше.

Если данные в кэше и памяти не совпадают, то они помечаются [грязными битами](https://ru.wikipedia.org/wiki/%D0%93%D1%80%D1%8F%D0%B7%D0%BD%D1%8B%D0%B9_%D0%B1%D0%B8%D1%82) (англ. dirty bit).

## Поток инструкций

Современные процессоры могут параллельно обрабатывать несколько команд. Пока одна инструкция находится в стадии декодирования, процессор может успеть получить другую инструкцию.

![[1_FJxls8ZBHc3l3tTKxrO6Sg.webp]]
Однако такое решение подходит только для тех инструкций, которые не зависят друг от друга.

Если процессор многоядерный, это означает, что фактически в нём находятся несколько отдельных процессоров с некоторыми общими ресурсами, например кэшем.

Если хотите узнать о процессорах больше, посмотрите, [какие бывают популярные архитектуры: CISC, RISC, MISC и другие и виды](https://tproger.ru/articles/processors-architectures-review/).


Техпроцесс — это размер, используемый при производстве процессоров. Он определяет величину транзистора, единицей измерения которого является нм (нанометр). Транзисторы, в свою очередь, составляют внутреннюю основу ЦП. Суть заключается в том, что постоянное совершенствование методики изготовления позволяет уменьшать размер этих компонентов. В результате на кристалле
процессора их размещается гораздо больше. Это способствует улучшению характеристик CPU, поэтому в его параметрах всегда указывают используемый техпроцесс. Например, Intel Core i5-760 выполнен по техпроцессу 45 нм, а Intel Core i5-2500K по 32 нм, исходя из этой информации, можно судить о том, насколько процессор современен и превосходит по производительности своего
предшественника, но при выборе необходимо учитывать и ряд других параметров. Ядро процессора - самый главный элемент центрального процессора. Оно представляет собой часть процессора, способное выполнять один поток команд. Ядро это такая фабрика транзисторов, которые выполняют вычислении и чем бользе ядер в процессоре тем быстрее он работает. Ядро пособный выполнять линейную последовательность задач за определенный период времени. Если нагрузить одно ядро несколькими последовательностями задач, то оно будет попеременно переключаться между ними, обрабатывая по одной задаче из каждого потока. В масштабах системы это приводит к замедлению работы программ и сервисов. Поэтому чем больше ядро в процессоре тем быстрее он работает. 
