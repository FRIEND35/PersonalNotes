![[Pasted image 20221019132021.png]]

**Файловая система** — это набор стандартов и соответствующих процессов, которые определяют и управляют тем, в каком виде ваши данные хранятся на носителе информации и каким образом они могут быть из него извлечены. 

Файловая система (file system, ФС) — важная составляющая любой операционной системы (ОС), отвечающая за организацию, хранение, чтение, запись файлов. От ФС зависит физическая и логическая структура файлов, политика создания и управления ими, максимальный размер файла и длина его имени. Linux поддерживает множество разных file system, включая FAT, FAT32, NTFS из Windows. Но использовать рекомендуем «родные» системы: Ext3, Ext4, ReiserFS, XFS, Btrfs и пр. Особенно если вы намерены работать с [облачной инфраструктурой](https://www.cloud4y.ru/cloud-hosting/cloud-server/).

[[AA. Ядро linux | Ядро]]  операционной системы Linux содержит целый набор предустановленных файловых систем, каждая из которых помогает пользователю успешно решать стоящие перед ним задачи.

В зависимости от того, что необходимо, — быстродействие, высокая гарантия восстановления данных или производительность, можно выбрать стандартную файловую систему для конкретного раздела, специальную или виртуальную. Разобрались, как устроены файловые системы Linux, чем они отличаются и в каких случаях применяются.


# Файловые системы в операционной системе Linux. Базовые понятия

ОС Linux предоставляет выбор еще на стадии установки: в[[AA. Ядро linux | ядро]] системы встроены разные файловые системы (ФС). При этом пользователь должен выбрать ту, что отвечает его требованиям и задачам. Перед теми, кто использует Windows, такой вопрос не стоит — эту ОС можно установить только на NTFS. Отличается от Windows и иерархическое устройство самих ФС, и структура каталогов.

Linux поддерживает деление жесткого диска на разделы. Для подсчета и определения физических границ используется специальная таблица разделов — [[JJ. MBR и GPT | GPT]] или [[JJ. MBR и GPT | MBR]] . Она содержит метку и номер раздела, а также адреса физического расположения точек начала и конца раздела.


# Способ организации файловой системы в Linux

Linux позволяет установить отдельную ФС для каждого раздела. Выбранная система определяет, как быстро будет выполняться работа с файлами, запись и чтение информации. Как в оперативной памяти будет храниться информация (и будет ли она вообще храниться), каким образом можно вносить изменения в конфигурацию ядра ОС — это тоже зависит от ФС.

В Linux на каждый раздел можно установить свою ФС, которая отвечает за порядок и способ организации информации. В основе файловых систем лежит набор правил, определяющий, где и каким образом хранятся данные. Следующий «слой» ФС — практический (технический) способ организации информации на каждом конкретном типе носителя (опять же, учитывая правила, заложенные в основу системы).

От выбора файловой системы зависят:

-   скорость работы с файлами;
-   их сохранность;
-   скорость записи;
-   размер файлов.

Тип ФС также определяет, будут ли данные храниться в оперативной памяти (ОП) и как именно пользователь сможет изменить конфигурацию ядра. В качестве способа повышения эффективности ОС, в [**Linux**](https://ravesli.com/chto-takoe-linux-ego-struktura-i-preimushhestva/ "Что такое Linux? История создания Linux") применяется следующая модель файловой системы:


![[Pasted image 20221019132553.png]]

Благодаря такому подходу, добавление поддержки какой-нибудь новой файловой системы не потребует вносить соответствующих изменений в само ядро ОС. 

Такая архитектура позволяет обеспечивать поддержку добавляемой ФС без вмешательства в ядро ОС. Ядро Linux поддерживает более 100 типов файловых систем, причём не только современных, но и старых. Чтобы увидеть список ФС, поддерживаемых ядром, откройте /proc/filesystems.

> **_Файловая система_** _(ФС) — архитектура хранения данных, которые могут находиться в разделах жесткого диска и ОП. Выдает пользователю доступ к конфигурации ядра. Определяет, какую структуру принимают файлы в каждом из разделов, создает правила для их генерации, а также управляет файлами в соответствии с особенностями каждой конкретной ФС._


>**_Примечание_:** В Linux практически все объекты представлены в виде [**файлов**](https://ravesli.com/tipy-fajlov-v-linux/ "Типы файлов в Linux") (например, каталоги, принтеры, разделы диска, устройства и т.д.). Это делает еще более важным изучение того, как работает файловая система Linux.

## Виртуальная файловая система

File system Linux — пространство раздела, состоящее из кратных размеру сектора блоков. Обмен данными производится через VFS или с помощью драйверов. VFS (virtual file system) — это слой абстракции, необходимый для взаимодействия между ядром и софтом. VFS позволяет не думать о специфике работы той или иной ФС. Драйверы ФС обеспечивают взаимодействие между оборудованием (железом) и приложениями.

**Ravesli:** **Виртуальная файловая система** (сокр. **_«VFS»_** от англ. _«**V**irtual **F**ile **S**ystem»_) — это специальный слой абстракции, предоставляющий программный интерфейс (единый набор команд) для взаимодействия между ядром и конкретной реализацией файловой системы.

**Wiki:** Виртуальная файловая система (англ. virtual file system — VFS) или виртуальный коммутатор файловой системы (англ. virtual filesystem switch) — уровень абстракции поверх конкретной реализации файловой системы. Целью VFS является обеспечение единообразного доступа клиентских приложений к различным типам файловых систем. VFS может быть использована для доступа к локальным устройствам и файлам (fat32, ext4, ntfs), сетевым устройствам и файлам на них (nfs), а также к устройствам, не предназначенным для хранения данных (procfs[1]). VFS декларирует программный интерфейс между ядром и конкретной файловой системой, таким образом, для добавления поддержки новой файловой системы не требуется вносить изменений в ядро операционной системы. 

ФС Linux — пространство раздела, поделенное на блоки определенного размера. Он определяется кратностью размеру сектора. Соответственно, это могут быть 1024, 2048, 4096 или 8120 байт. Важно помнить, что размер каждого блока известен изначально, ограничен максимальным размером ФС и зависит от требований, которые выдвигает пользователь к каждому из блоков.

Для обмена данными существует сразу два способа. Первый из них — виртуальная файловая система (VFS). С помощью данного типа ФС происходит совместная работа ядра и приложений, установленных в системе. VFS позволяет пользователю работать, не учитывая особенности каждой конкретной ФС. Второй способ — драйверы файловых систем. Именно они отвечают за связь между «железом» и софтом.

Список файловых систем, которые поддерживаются ядром, находится в файле **/proc/filesystems**:

```
user@user-VirtualBox:~$ cat /proc/filesystems 
 nodev    sysfs
 nodev    rootfs
 nodev    ramfs
 nodev    bdev
 nodev    proc
 nodev    cpuset
 nodev    cgroup
 nodev    cgroup2
 nodev    tmpfs
 nodev    devtmpfs
 nodev    debugfs
 nodev    tracefs
 nodev    securityfs
 nodev    sockfs
 nodev    bpf
 nodev    pipefs
 nodev    hugetlbfs
 nodev    devpts
     ext3
     ext2
     ext4
     squashfs
     vfat
 nodev    ecryptfs
     fuseblk
 nodev    fuse
 nodev    fusectl
 nodev    pstore
 nodev    mqueue
 nodev    autofs
```


# Структура и иерархия файловой системы. Структура каталога или же  Cтруктура файловой системы Linux


Если вы ранее пользовались только Windows, то структура файловой системы Linux может показаться вам особенно чуждой: нет привычного обозначения `C:\` и букв дисков, их заменили каталог `/` и другие папки, большинство из которых имеют странные имена, состоящие из трех букв.

Причина всего этого в том, что в Linux используется свой **FHS** (сокр. от «_**F**ilesystem_ _**H**ierarchy_ _**S**tandard_» = _«Стандарт иерархии файловой системы»_). FHS определяет структуру и содержание/назначение каталогов в [**дистрибутивах Linux**](https://ravesli.com/obzor-distributivov-linux-kakoj-vybrat/ "Обзор дистрибутивов Linux. Какой выбрать?"). Благодаря данному стандарту структура каталогов во всех дистрибутивах Linux является (почти) одной и той же.

Структура каталогов в Linux:

-   [/](https://ravesli.com/struktura-katalogov-v-linux/#toc-1)
-   [/bin](https://ravesli.com/struktura-katalogov-v-linux/#toc-2)
-   [/boot](https://ravesli.com/struktura-katalogov-v-linux/#toc-3)
-   [/cdrom](https://ravesli.com/struktura-katalogov-v-linux/#toc-4)
-   [/dev](https://ravesli.com/struktura-katalogov-v-linux/#toc-5)
-   [/etc](https://ravesli.com/struktura-katalogov-v-linux/#toc-6)
-   [/home](https://ravesli.com/struktura-katalogov-v-linux/#toc-7)
-   [/usr](https://ravesli.com/struktura-katalogov-v-linux/#toc-8)
-   [/lib](https://ravesli.com/struktura-katalogov-v-linux/#toc-9)
-   [/sbin](https://ravesli.com/struktura-katalogov-v-linux/#toc-10)
-   [/tmp](https://ravesli.com/struktura-katalogov-v-linux/#toc-11)
-   [/var](https://ravesli.com/struktura-katalogov-v-linux/#toc-12)
-   [/proc](https://ravesli.com/struktura-katalogov-v-linux/#toc-13)
-   [/opt](https://ravesli.com/struktura-katalogov-v-linux/#toc-14)
-   [/root](https://ravesli.com/struktura-katalogov-v-linux/#toc-15)
-   [/media](https://ravesli.com/struktura-katalogov-v-linux/#toc-16)
-   [/mnt](https://ravesli.com/struktura-katalogov-v-linux/#toc-17)
-   [/srv](https://ravesli.com/struktura-katalogov-v-linux/#toc-18)
-   [/run](https://ravesli.com/struktura-katalogov-v-linux/#toc-19)
-   [/lost+found](https://ravesli.com/struktura-katalogov-v-linux/#toc-20)

**cloud4y.ru**: В Linux имеется своя особая структура каталогов, политика распределения файлов конфигурации, исполняемых и временных файлов. Здесь работает логика, отличная от Windows.

Ключевое отличие в том, что обычно в линуксе программа не сохраняется в одной папке. Она распределяется по корневой файловой системе. По сути, file system в Linux начинается с директории «/» (которая называется корнем — от слова root) и разрастается в директории /sbin, /dev, /lib, /log, /boot и т.д. Получается древовидная иерархическая структура, в которой абсолютный путь к любой сущности начинается с корневой директории. Если файл лежит в /home/user/work, то структура каталогов идет по цепочке root->home->user->work.

Иерархичность линуксовых систем часто определяется стандартом FHS, который описывает, какая информация должна находится в том или ином месте «дерева». Ещё одной особенностью линкусовой файловой системы является её целостность. Это значит, что любые изменения, вносимые в файл, не влияют на другие файлы, которые не связаны с ним. Командой fsck вы можете проверить целостность ФС в Linux.

![[Pasted image 20221020143825.png]]


**selectel.ru:** Файловая система в Linux определяет также организацию расположения файлов, по сути представляя собой иерархическую структуру «дерева»: начинается с корневого каталога «/» и разрастается ветвями в зависимости от работы системы.  

ФС также характерно понятие целостности: в такой системе изменения, внесенные в один файл, не приведут к изменению другого файла, не связанного с первым. У всех данных есть собственная физическая память. В Linux целостность ФС проверяется специальной командой — _**fsck**_.  

Типы файлов условно можно разделить на несколько групп. Некоторые из них такие же, как и в ОС Windows, — текстовые документы, медиа и изображения. Отличия начинаются с каталогов, которые являются отдельным типом файлов. Жесткие диски относят к блочным устройствам. Принтеры — к символьным. Отдельную группу составляют символические ссылки, о которых речь пойдет ниже. К типам файлов относится каналы межпроцессного взаимодействия — PIPE (FIFO), а также гнезда (разъемы центрального процессора).

Тип файла определяется с помощью команды **_ls_** (параметр -l).

![[Pasted image 20221020143322.png]]

В ФС каждый файл определяется конкретным индексом — Inode (от англ. index node — «индексный дескриптор»). Но при этом один файл (речь о физическом размещении) может иметь сразу несколько имен (или путей). И если в структуре ФС файлы будут отличаться, то на жестком диске им может соответствовать один файл. Это означает, что ФС Linux перекрестно-иерархична, а ветви дерева могут пересекаться.

Корневой раздел в Linux один — «/» (root, «корень)». Разделы называются подкаталогами, примонтированными к соответствующим каталогам. Типовая структура каталогов (первых двух уровней), примонтированных к корневому каталогу Linux для сервера, представленного компанией [Selectel](https://selectel.ru/), выглядит так:

```
.
├── bin -> usr/bin
├── boot
│   ├── grub
│   └── lost+found
├── dev
│   ├── block
│   └── ...
├── etc
│   ├── ...
│   ├── update-manager
│   ├── update-motd.d
│   └── xdg
├── home
├── lib -> usr/lib
├── lib32 -> usr/lib32
├── lib64 -> usr/lib64
├── libx32 -> usr/libx32
├── lost+found
├── media
├── mnt
├── opt
├── proc
│   ├── ...
│   └── tty
├── root
├── run
│   └── ...
├── sbin -> usr/sbin
├── srv
├── sys
├── tmp
│   └── ...
├── usr
└── var
```

При монтировании происходит ассоциирование каталога с устройством, содержащим ФС (драйвер). Соответствующая ссылка на устройство передается драйверу. Именно он и определяет ФС. Если процедура завершается успешно, ядро заносит информацию (каким драйвером обслуживаются и где расположены файлы и каталоги) в таблицу монтирования. Она находится в файле /proc/mounts.

Данные о каждом файле содержит Inode — специфичный для UNIX-систем индексный дескриптор, хранящий различную метаинформацию (владелец файла, последнее время обращения, размер и так далее).

Когда файл (каталог) перемещается в другую ФС, его Inode тоже создается заново. И только потом удаляется исходный (в рамках той же системы меняется только путь файла). Также отметим, что файл (каталог) существует до того момента, пока хранится информация о его имени или пути к нему. После удаления всей информации блоки, отведенные под файл, становятся свободными (для выделения под другой файл).

Еще одна особенность Linux: существование сразу двух типов ссылок. Во-первых, жесткая ссылка (Hard-Link), которая представляет собой один из путей файла (команда ls -li). Во-вторых, символьная ссылка (Symbolic link) — это файл UNIX с текстовой строкой с путем к оригинальному файлу.

Общая информация о ФС хранится в суперблоке. Сюда относится суммарное число блоков и Inode, число свободных блоков, их размеры и так далее. Важно, чтобы суперблок сохранял свою целостность, поскольку от этого зависит стабильность и работоспособность системы в целом. В ОС создается сразу несколько копий, чтобы можно было восстановить всю необходимую информацию.

При загрузке ядро автоматически монтирует разделы после того, как корень уже примонтирован на чтение. Информацию ядро считывает из конфигурации /etc/fstab. Содержимое файла /etc/fstab с информацией о порядке монтирования разделов файловой системы на примере сервера [Selectel](https://selectel.ru/):

В соответствии с этим файлом сначала монтируется корневой каталог / из раздела /dev/mapper/vg0-root / с файловой системой ext4. Потом каталог, на котором находится загрузчик /boot, из раздела с длинным именем UUID=196a5b2c-8d6b-4970-a9c8-4579ab46e220. И отдельно монтируется swap (иногда его называют разделом подкачки), но в структуре он не отображается.

Еще одна особенность: устройства монтируются по идентификатору. Это, в свою очередь, помогает не перенастраивать файл конфигурации, когда пользователь меняет блочное устройство.

Понимание файловой системы Linux, структуры каталогов, размещения конфигурационных, исполняемых и временных файлов поможет вам лучше разбираться в своей системе и стать успешным системным администратором. Файловая система Linux будет непривычна именно для новичка, только что перешедшего с Windows, ведь здесь все совсем по-другому.

В ОС Windows жесткие диски называются латинскими буквами (С:, D:, ...), и каждый из дисков представляет собой корневой каталог с собственным деревом папок. Подключение же нового устройства приведет к появлению нового корневого каталога со своей буквой (например, F:). В ОС Linux файловая система представлена единым корневым каталогом, обозначаемым как слэш (/). Соответственно, при данной файловой структуре не диски содержат каталоги, а каталог — диски. Другими словами, в отличие от Windows, программа не находится в одной папке, а, как правило, распределена по корневой файловой системе. Это распределение поддается определенным правилам.

![[Pasted image 20221023060830.png]]


### / - корень

Это главный каталог в системе Linux. По сути, это и есть файловая система Linux. Здесь нет дисков или чего-то подобного, как в Windows. Вместо этого, адреса всех файлов начинаются с корня, а дополнительные разделы, флешки или оптические диски подключаются в папки корневого каталога. Простыми словами, root каталог - cодержит в себе всю иерархию системы;

Только пользователь root имеет право читать и изменять файлы в этом каталоге. Обратите внимание, что у пользователя root домашний каталог /root, но не сам /.

**Ravesli:** Все файлы и каталоги в Linux расположены в папке `/`, именуемой **корневой** (от слова _«root»_). Если вы посмотрите на структуру каталогов, то заметите, что она похожа на корень растения.

Поскольку все остальные каталоги или файлы происходят от корня, абсолютный путь к любому из них начинается с корневой директории. Например, если у вас есть файл в _/home/user/documents_, то вы можете догадаться, что структура каталогов идет от _root->home->user->documents_.

>
_**Шутка про «****rm –****rf /»:**_ Возможно, вы сталкивались с некоторыми шутками в Интернете, в которых упоминается `rm -rf /`. Команда `rm` (от англ. _«_**_r_**_e**m**ove»_) используется для удаления файлов и каталогов в Linux.
>
С помощью `rm -rf /` вы просите свою систему принудительно и рекурсивно удалить содержимое корневого каталога. Поскольку в корневом каталоге содержатся все файлы и папки ОС, то данной командой вы стираете все данные, и ваша Linux-система просто должна исчезнуть (теоретически).
>
Большинство дистрибутивов Linux не запустят эту команду без ключа `--no-preserve-root`. Но в любом случае, не стоит ради любопытства пытаться выполнить эту команду.


### /bin - binaries или же бинарные (двоичные) файлы пользователя

Этот каталог содержит исполняемые файлы. Здесь расположены программы, которые можно использовать в однопользовательском режиме или режиме восстановления. Одним словом, те утилиты, которые могут использоваться пока еще не подключен каталог /usr/. Это такие общие команды, как cat, ls, tail, ps и т д. Другими словами, здесь находятся двоичные исполняемые файлы. Основные общие команды, хранящиеся отдельно от других программ в системе (прим.: pwd, ls, cat, ps);

**Ravesli:** **Каталог _/bin_** содержит двоичные файлы многих основных программ и утилит (_ls, cp, cd_ и т.д.), которые должны присутствовать при монтировании системы в однопользовательском режиме. Приложения, такие как Firefox, хранятся в `_/usr/bin_`, в то время как важные системные программы и утилиты, такие как оболочка bash, находятся в _/bin_.

### /sbin - (system binaries) системные исполняемые файлы

Так же как и /bin, содержит двоичные исполняемые файлы, которые доступны на ранних этапах загрузки, когда не примонтирован каталог /usr. Но здесь находятся программы, которые можно выполнять только с правами суперпользователя. Это разные утилиты для обслуживания системы. Например, iptables, reboot, fdisk, ifconfig,swapon и т д. Если коротко, аналогично /bin содержит бинарные файлы. Утилиты нужны для настройки и администрирования системы суперпользователем;

**Ravesli:** **Каталог _/sbin_** аналогичен каталогу `/bin`. Он содержит основные двоичные файлы утилит системного администрирования, которые, обычно, предназначены для запуска привилегированным (root) пользователем (_ifconfig,_ _dhclient,_ _dmidecode,_ _init_ и т.д.).

### /etc - etcetera (configuration files) или же конфигурационные файлы

В этой папке содержатся конфигурационные файлы всех программ, установленных в системе. Кроме конфигурационных файлов, в системе инициализации Init Scripts, здесь находятся скрипты запуска и завершения системных демонов, монтирования файловых систем и автозагрузки программ. Структура каталогов linux в этой папке может быть немного запутанной, но предназначение всех их - настройка и конфигурация. Простыми словами, в этой директории находятся файлы конфигураций программ. Эти файлы позволяют настраивать системы, сервисы, скрипты системных демонов;

**Ravesli:** **Каталог _/etc_** содержит основные конфигурационные файлы системы, используемые администратором системы и её службами, такие как файл паролей и файлы настроек сетей. Обычно их можно редактировать вручную в текстовом редакторе. Если вам нужно внести изменения в конфигурацию системы (например, изменить имя хоста), то именно здесь вам стоит искать необходимые файлы. Обратите внимание, что каталог _`/etc`_ содержит общесистемные конфигурационные файлы; пользовательские конфигурационные файлы находятся в домашнем каталоге каждого пользователя.

### /dev - devices files или же файлы устройств

В Linux все, в том числе внешние устройства являются файлами. Таким образом, все подключенные флешки, клавиатуры, микрофоны, камеры - это просто файлы в каталоге /dev/. Этот каталог содержит не совсем обычную файловую систему. Структура файловой системы Linux и содержащиеся в папке /dev файлы инициализируются при загрузке системы, сервисом udev. Выполняется сканирование всех подключенных устройств и создание для них специальных файлов. Это такие устройства, как: /dev/sda, /dev/sr0, /dev/tty1, /dev/usbmon0 и т д. То есть,  в данной директории располагаются файлы устройств (драйверов). С помощью этих файлов можно взаимодействовать с устройствами. К примеру, если это жесткий диск, можно подключить его к файловой системе. В файл принтера же можно написать напрямую и отправить задание на печать;

**Ravesli:** Различные устройства воспринимаются и отображаются системой Linux в виде файлов, хранящихся в **каталоге _/dev_**. Стоит отметить, что это не настоящие файлы, какими мы их привыкли воспринимать, а специальный тип (интерфейс), используемый операционной системой для взаимодействия с устройствами. Например, файл _`/dev/sda`_ представляет собой первый SATA-диск в системе. Если вы хотите разбить его на разделы, то можете запустить редактор разделов и попросить его отредактировать файл _`/dev/sda`_. Файл `_/dev/sr_` — это CD-ROM, а файл `_/dev/wlan_`, как вы наверняка уже догадались, соответствует беспроводному сетевому интерфейсу. Также в этом каталоге могут содержаться специальные файлы псевдоустройств, которые на самом деле не сопоставляются с реальным оборудованием, например:

   `/dev/null` — это специальное устройство (_«пустое устройство»_), которое не производит вывода и автоматически отбрасывает все поступающие входные данные. Когда вы передаете вывод информации от какой-нибудь команды на устройство `/dev/null`_,_ то вся эта информация попросту будет отброшена;

   `/dev/random` — генератор случайных чисел;

   `/dev/zero` — источник бесконечной последовательности нулевых байтов.

### /proc - (proccess) информация о процессах

Это тоже необычная файловая система, а подсистема, динамически создаваемая ядром. Здесь содержится вся информация о запущенных процессах в реальном времени. По сути, это псевдофайловая система, содержащая подробную информацию о каждом процессе, его Pid, имя исполняемого файла, параметры запуска, доступ к оперативной памяти и так далее. Также здесь можно найти информацию об использовании системных ресурсов, например, /proc/cpuinfo, /proc/meminfo или /proc/uptime. Кроме файлов в этом каталоге есть большая структура папок linux, из которых можно узнать достаточно много информации о системе. То есть /proc содержит файлы, хранящие информацию о запущенных процессах и о состоянии ядра ОС;

**Ravesli:** **Каталог _/proc_** похож на каталог `/dev`, потому что он содержит не обычные файлы, а специальные файлы, предоставляющие информацию о запущенных процессах и состоянии ядра. Содержимое каталога `/proc` используется рядом утилит для получения системной информации этапа времени выполнения.

Например, если вы хотите проверить информацию о процессоре в Linux, то можете просто обратиться к файлу `/proc/cpuinfo`. Если вы хотите проверить использование памяти вашей системы Linux, посмотрите на содержимое файла `/proc/meminfo`.

### /var (variable) - Переменные файлы или же файлы изменяемых данных

Название каталога /var говорит само за себя, он должен содержать файлы, которые часто изменяются. Размер этих файлов постоянно увеличивается. Здесь содержатся файлы системных журналов, различные кеши, базы данных и так далее. Дальше рассмотрим назначение каталогов Linux в папке /var/. Другими словами, 

**Ravesli:** **Каталог _/var_** (сокр. от _«**var**iable»_) является доступным для записи аналогом каталога `/usr`. Файлы журналов, кэш программ, информация об очереди печати, общая информация с момента запуска системы — всё это пишется в каталог `/var`.

Файлы, хранящиеся здесь, не очищаются автоматически. По этой причине данный каталог представляет большой интерес для системных администраторов, ищущих информацию о поведении своей системы. Например, если вы хотите ознакомиться с глобальным системным журналом Linux, то просто посмотрите содержимое файла `/var/log/syslog.

### /var/log - Файлы логов

Здесь содержатся большинство файлов логов всех программ, установленных в операционной системе. У многих программ есть свои подкаталоги в этой папке, например, /var/log/apache - логи веб-сервера, /var/log/squid - файлы журналов кеширующего сервера squid. Если в системе что-либо сломалось, скорее всего, ответы вы найдете здесь.

### /var/lib - базы данных

Еще один тип изменяемых файлов - это файлы баз данных, пакеты, сохраненные пакетным менеджером и т д.

### /var/mail - почта

В эту папку почтовый сервер складывает все полученные или отправленные электронные письма, здесь же могут находиться его логи и файлы конфигурации.

### /var/spool - очереди

Изначально, эта папка отвечала за очереди печати на принтере и работу набора программ cups.

### /var/lock - файлы блокировок

Здесь находятся файлы блокировок. Эти файлы означают, что определенный ресурс, файл или устройство занят и не может быть использован другим процессом. Apt-get, например, блокирует свою базу данных, чтобы другие программы не могли ее использовать, пока программа с ней работает.

### /var/run - PID процессов

Содержит файлы с PID процессов, которые могут быть использованы, для взаимодействия между программами. В отличие от каталога /run данные сохраняются после перезагрузки.

### /tmp (temp) - Временные файлы

В этом каталоге содержатся временные файлы, созданные системой, любыми программами или пользователями. Все пользователи имеют право записи в эту директорию.

Файлы удаляются при каждой перезагрузке. Аналогом Windows является папка Windows\Temp, здесь тоже хранятся все временные файлы.

**Ravesli:** Как следует из названия, в **каталоге _/tmp_** хранятся временные файлы используемых приложений (вы тоже можете задействовать данный каталог для размещения своих временных файлов).

Но обратите внимание, что при перезагрузке вашей системы содержимое каталогов в `_/tmp_` удаляется. Некоторые Linux-системы могут в любое время автоматически удалить старые файлы, поэтому не храните здесь ничего важного.

### /usr - (user applications) Программы пользователя  или же user binaries and program data (пользовательские двоичные файлы и программные данные)

Это самый большой каталог с большим количеством функций. Тут наиболее большая структура каталогов Linux. Здесь находятся исполняемые файлы, исходники программ, различные ресурсы приложений, картинки, музыку и документацию. Другими словами, содержит пользовательские приложения и утилиты второго уровня, используемые пользователями, а не системой. Содержимое доступно только для чтения (кроме root). Каталог имеет вторичную иерархию и похож на корневой;

**Ravesli:** **Каталог** _**/usr**_ содержит исполняемые файлы, файлы библиотек и заголовочные файлы большинства пользовательских программ. По этой причине практически все они доступны только для чтения (для обычного пользователя).

   `/usr/bin` — основные пользовательские утилиты;

   `/usr/sbin` — дополнительные утилиты для администрирования и настройки системы;

   `/usr/lib` — библиотеки утилит из _`/usr/bin`_ и _`/usr/sbin`_;

   `/usr/share` — содержит документацию или общие для всех библиотек данные.

### /usr/bin/ - Исполняемые файлы

Содержит исполняемые файлы различных программ, которые не нужны на первых этапах загрузки системы, например, музыкальные плееры, графические редакторы, браузеры и так далее.

### /usr/sbin/

Содержит двоичные файлы программ для системного администрирования, которые нужно выполнять с правами суперпользователя. Например, таких как Gparted, sshd, useradd, userdel и т д.

### /usr/lib/ - Библиотеки

Содержит библиотеки для программ из /usr/bin или /usr/sbin.

### /usr/local - Файлы пользователя

Содержит файлы программ, библиотек, и настроек созданные пользователем. Например, здесь могут храниться программы собранные и установленные из исходников и скрипты, написанные вручную.

### /cdrom — исторически сложившаяся папка для CD-ROM

**Каталог _/cdrom_** не является частью FHS, но вы все равно можете встретить его, например, в [**Ubuntu**](https://ravesli.com/obzor-distributivov-linux-kakoj-vybrat/#toc-10) или других дистрибутивах Linux. Это временное место для компакт-дисков. Однако стандартное расположение временных носителей находится внутри каталога `/media`.

### /lost+found - Директория восстановления

содержит файлы, восстановленные после сбоя работы системы. Система проведет проверку после сбоя и найденные файлы можно будет посмотреть в данном каталоге;

**Ravesli:** Каждая файловая система Linux имеет **каталог _/lost+found_**. Если файловая система выходит из строя, то при следующей загрузке будет выполнена её проверка. Все найденные поврежденные файлы будут помещены в каталог `/lost+found`, так что вы сможете попытаться восстановить как можно больше данных.

### /home - Домашняя папка или же личные каталоги пользователей

В этой папке хранятся домашние каталоги всех пользователей. В них они могут хранить свои личные файлы, настройки программ и т д. Например, /home/sergiy и т д. Если сравнивать с Windows, то это ваша папка пользователя на диске C, но в отличии от WIndows, home как правило размещается на отдельном разделе, поэтому при переустановке системы все ваши данные и настройки программ сохранятся. Если коротоко, каталог, аналогичный каталогу Users в Windows. Содержит домашние каталоги учетных записей пользователей (кроме root). При создании нового пользователя здесь создается одноименный каталог с аналогичным именем и хранит личные файлы этого пользователя;

**Ravesli:** **Каталог _/home_** является хранилищем домашних папок пользователей системы, в которых те хранят свои личные файлы, заметки, утилиты и пр. Домашний каталог содержит пользовательские данные и пользовательские файлы конфигурации.

При создании нового пользователя в системе Linux, обычно для него создается соответствующий домашний каталог (и группа, но об этом позже). Предположим, что в вашей системе уже есть два пользователя: _alice_ и _bob_. Тогда их домашние каталоги будут иметь пути `/home/alice` и `/home/bob` соответственно. Обратите внимание, что каждый (обычный) пользователь имеет доступ на запись только в свою домашнюю папку. Например, у пользователя _bob_ не будет доступа к каталогу `/home/alice` и наоборот.

### /boot -  boot files или же Файлы загрузчика

Содержит все файлы, связанные с загрузчиком системы. Это ядро vmlinuz, образ initrd, а также файлы загрузчика, находящие в каталоге /boot/grub. Простыми словами, тут расположены файлы, используемые для загрузки системы (образ initrd, ядро vmlinuz);

**Ravesli:** **Каталог _/boot_** содержит файлы, необходимые для загрузки системы. Например, здесь хранятся файлы загрузчика [[CC. GRUB | GRUB]]  и ваши ядра Linux. Однако конфигурационные файлы загрузчика находятся не здесь — они лежат в _/etc_ вместе с другими конфигурационными файлами.

### /lib (library) - Системные библиотеки

Содержит файлы системных библиотек, которые используются исполняемыми файлами в каталогах /bin и /sbin.

Библиотеки имеют имена файлов с расширением *.so и начинаются с префикса lib*. Например, libncurses.so.5.7. Папка /lib64 в 64 битных системах содержит 64 битные версии библиотек из /lib. Эту папку можно сравнить с WIndows\system32, там тоже сгружены все библиотеки системы, только там они лежат смешанные с исполняемыми файлами, а здесь все отдельно. То есть тут содержит системные библиотеки, с которыми работают программы и модули ядра;

**Ravesli:** **Каталог** **_/lib_** содержит библиотеки, необходимые двоичным файлам в каталогах `/bin` и `/sbin`.

### /opt (Optional applications) - Дополнительные программы

В эту папку устанавливаются проприетарные программы, игры или драйвера. Это программы созданные в виде отдельных исполняемых файлов самими производителями. Такие программы устанавливаются в под-каталоги /opt/, они очень похожи на программы Windows, все исполняемые файлы, библиотеки и файлы конфигурации находятся в одной папке. Другими словами, -   тут расположены дополнительные (необязательные) приложения. Такие программы обычно не подчиняются принятой иерархии и хранят свои файлы в одном подкаталоге (бинарные, библиотеки, конфигурации);

**Ravesli:** **Каталог _/opt_** содержит подкаталоги для дополнительных пакетов программного обеспечения. Обычно он используется проприетарным программным обеспечением, которое не подчиняется стандартной иерархии файловой системы, например, проприетарная программа при установке может сохранить свои файлы в `/opt/application`.

### /mnt (mount) - Монтирование

В этот каталог системные администраторы могут монтировать внешние или дополнительные файловые системы. Понятным языком, точка временного монтирования. Файловые системы подключаемых устройств обычно монтируются в этот каталог для временного использования;

**Ravesli:** **Каталог _/mnt_** похож на каталог `_/media_`, но вместо автоматического монтирования съемного носителя, `_/mnt_` используется системными администраторами для ручного монтирования различных файловых систем.

>**_Примечание:_** Исторически сложилось, что каталог `_/mnt_` — это место, где системные администраторы монтировали временные файловые системы во время их использования. Например, если вы монтируете раздел Windows для выполнения некоторых операций восстановления файлов, вы можете смонтировать его в `_/mnt/windows_`. Однако вы также можете монтировать файловые системы и в отличном от `_/mnt_` месте системы.

### /media - Съемные носители (точка монтирования съемных носителей)

В этот каталог система монтирует все подключаемые внешние накопители - USB флешки, оптические диски и другие носители информации. То есть, /media — точка монтирования внешних носителей. Например, когда вы вставляете диск в дисковод, он будет автоматически смонтирован в директорию /media/cdrom;

**Ravesli:** При подключении съемного носителя, такого как USB-диск, SD-карта или DVD-диск, для них автоматически создается соответствующая папка в **каталоге _/media_**. При помощи такой папки вы можете получить доступ к содержимому съемного носителя.

### /srv (server) - Сервер 

В этом каталоге содержатся файлы серверов и сервисов. Например, могут содержаться файлы веб-сервера apache. Другими словами, /srv — содержит файлы сервисов, предоставляемых сервером (прим. FTP или Apache HTTP);

**Ravesli:** **Каталог _/srv_** содержит данные об «услугах», предоставляемых системой. Если вы используете HTTP-сервер Apache для обслуживания веб-сайта, то вы, скорее всего, храните файлы вашего сайта внутри каталога `_/srv_`.

### /run - процессы (файлы текущего состояния приложений)

Еще один каталог, содержащий PID файлы процессов, похожий на /var/run, но в отличие от него, он размещен в TMPFS, а поэтому после перезагрузки все файлы теряются. То есть /run содержит файлы состояния приложений. Например, PID-файлы или UNIX-сокеты;

**Ravesli:** **Каталог _/run_** предоставляет приложениям стандартное место для хранения временных файлов и данных, которые требуются для работы различных процессов с момента запуска системы (сокеты, идентификаторы процессов и пр.). Данные файлы не сохраняются в `/tmp` по той причине, что из `/tmp` они могут быть удалены.

### /sys (system) - Информация о системе

Назначение каталогов Linux из этой папки - получение информации о системе непосредственно от ядра. Это еще одна файловая система организуемая ядром и позволяющая просматривать и изменить многие параметры работы системы, например, работу swap, контролировать вентиляторы и многое другое. Если коротко, /sys — содержит данные непосредственно о системе. Тут можно узнать информацию о ядре, драйверах и устройствах;

### /root - Директория суперпользователя

/root — директория, которая содержит файлы и личные настройки суперпользователя;

**Ravesli:** **Каталог _/root_** — это домашний каталог пользователя _root_. Вместо того, чтобы быть расположенным в `/home/root`, он находится в `/root`. Стоит отметить, что следует отличать данный каталог от каталога `/`, который, в свою очередь, является корневым каталогом всей системы.


# Типы файловых систем Linux. Какая из файловых систем используется ядром Linux



Пользователи могут использовать одну или несколько файловых систем, зашитых в линуксовый дистрибутив. Так как от них зависит метод работы с файлами, конфигурацией ядра и особенности хранения информации в оперативной памяти, то выбирать file system нужно исходя из текущих задач, учитывая сильные и слабые стороны доступных ФС.

Выделяют два типа таких систем, журналируемые и не журналируемые. Определить тип можно при помощи команды file -s. ФС первого типа ведут логи, фиксируя в отдельном файле информацию о действиях пользователя и план проверки системы. За счёт логирования система получается более устойчивой к сбоям. ФС второго типа не имеют логов. Они обладают хорошим быстродействием, но более уязвимы, так как не обеспечивают сохранность данных.

В зависимости от целей и задач пользователя (а также достоинств и недостатков самих ФС) можно выбрать любую файловую систему, доступную в дистрибутиве ОС.

Список основных файловых систем:

-   Ext2;
-   Ext3;
-   Ext4;
-   JFS;
-   ReiserFS;
-   XFS;
-   Btrfs;
-   ZFS.

ФС может являться корневой в различных разделах, Linux позволяет использовать разные системы одновременно.

### Файловая система ext

**ext** или **extfs** (сокр. от англ. _«**Ext**ended **F**ile **S**ystem»_) — это первая файловая система, предназначенная специально для Linux, которая была представлена в апреле 1992 года. Используемая структура метаданных была разработана Реми Кардом, на создание которой его вдохновила Unix File System. Максимальная длина имени файла составляла 255 символов, а размер раздела — до 2 ГБ.

Хотя ext и удалось решить проблемы, присутствовавшие в файловой системе Minix, у нее был один серьезный недостаток — временная метка. Сейчас, когда каждый файл в Linux имеет три временные метки (доступа к файлу, изменения содержимого файла, изменения свойств и метаданных файла (например, [**разрешений**](https://ravesli.com/tipy-polzovatelej-i-prava-dostupa-k-fajlam-katalogam-v-linux/ "Типы пользователей и Права доступа в Linux"))), файловая система ext поддерживала только одну временную метку.  

### Файловая система ext2

В январе 1993 года, менее чем через год после выхода ext, Реми Кард разрабатывает новую файловую систему — **ext2.**

В ext2 были расширены функциональные возможности ext:

   - увеличена производительность файловой системы;

   - данные файлов хранились в блоках данных одинаковой длины;

   - поддерживался максимальный размер файла в 2 [**тебибайта**](https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%B1%D0%B8%D0%B1%D0%B0%D0%B9%D1%82);

   - длина имени файла была ограничена 255 байтами (а не количеством символов, как раньше).

Высокая скорость работы ext2 объяснялась тем, что система не поддерживала механизм ведения [**логов**](https://ravesli.com/logs-in-linux/ "Логи в Linux. Как найти и прочитать?") (или **_«журналируемости»_**). С одной стороны, данный аспект можно отнести к преимуществу ext2, так как при работе с имеющими ограниченный ресурс использования накопителями (например, SSD-дисками или USB-устройствами), нет избыточных циклов перезаписи данных, следовательно, ресурс накопителя расходуется медленнее. С другой стороны, отсутствие системы ведения логов в ext2 часто приводило к двум очень неприятным проблемам:

   - **Повреждение файлов**, если в момент записи данных на диск отключалось питание или возникал сбой системы.

   - **Потеря производительности** из-за фрагментации данных: происходит, когда один файл разбивается на части (фрагментируется) и распределяется по нескольким местам на диске. В результате чтение и запись файлов занимают больше времени, что приводит к снижению производительности файловой системы.

Система ext2 использовалась по большей части до начала 2000-х годов, когда была представлена файловая система ext3.  

### Файловая система ext3

В ноябре 2001 года, благодаря усилиям программиста Стивена Твиди, вместе с релизом ядра Linux 2.4.15 увидела свет и новая файловая система — ext3.

**Файловая система ext3** — это улучшенная версия файловой системы ext2, в которой появилась возможность ведения логов. Она, как и ext2, поддерживает файлы размером в 2 тебибайта, а имена файлов ограничены 255 байтами.

Благодаря логам, система сохраняет в специальном лог-файле (или _«журнале»_) всю информацию об изменениях в данных, которые еще предстоит внести. В случае потери питания или сбоя системы, информация о файлах, хранящаяся в логах, может быть восстановлена в течение нескольких секунд, благодаря чему снижается риск повреждения или потери данных.

Ядро Linux поддерживает три уровня ведения логов:

   - **Journal** — состоит из записи метаданных и содержимого файлов в лог-файл до внесения изменений в основную файловую систему, тем самым обеспечивая наиболее полное логирование данных. Если случится какая-нибудь аварийная ситуация, то можно перечитать лог-файл и восстановить потерянную информацию. Недостатком данного уровня ведения логов является то, что он снижает производительность системы.

   - **Ordered** — процесс сохранения данных выполняется в определенном порядке: сначала в лог-файл записываются метаданные, затем содержимое файла записывается в основную файловую систему и уже тогда метаданные соединяются с основной файловой системой. В случае сбоя, основная файловая система не будет повреждена; риску повреждения подвергаются только те файлы, которые находятся во время сбоя непосредственно в процессе записи.

   - **Writeback** — уровень ведения лог-файла, при котором в него заносятся только метаданные, а содержимое файла записывается непосредственно в основную файловую систему. Из-за отсутствия синхронизации метаданных и содержимого файлов, в случае сбоя системы они, скорее всего, окажутся поврежденными.

## Файловая система ext4

**Файловая система** **ext4** была представлена в октябре 2008 года вместе с ядром Linux 2.6.28. Она поддерживает максимальный размер файла в 16 тебибайт и ограничивает максимальную длину имени файла 255 байтами.  

### Особенности файловой системы ext4

Давайте рассмотрим основной функционал файловой системы ext4:

   - **Обратная совместимость**. Файловая система ext4 поддерживает обратную совместимость с файловыми системами ext3 и ext2. Дополнительной функцией является автоматическое монтирование файловой системы ext3 в режиме ext3 с помощью драйвера ext4.

   - **Улучшения распределения**. Файловая система ext4 более эффективно распределяет блоки данных перед их записью на диск. Это повышает производительность как чтения, так и записи.

   - **Расширение диапазона временных меток**. Файловая система ext4 добавляет еще 408 лет к диапазону значений временных меток и поддерживает даты вплоть до 10 мая 2446 года. Также улучшилась точность временных меток — теперь они измеряются в наносекундах.

   - **Экстенты (Последовательные блоки)**. Устаревшие версии файловой системы ext отслеживают каждый блок, который связан с хранением данных файла (данный подход называется _методом «непрямого сопоставления»_). Но этот процесс перестает быть эффективным, когда речь заходит о больших файлах, требующих большого количества блоков. Экстенты решили эту проблему: с их помощью уменьшается объем метаданных, необходимых для сопоставления блоков каждого файла. Система сохраняет адрес только первого и последнего блока некоторого довольно большого файла, сообщая таким образом, что данные находятся в следующих _n_ блоках. Благодаря этому, файл, например, размером в 500 МБ, может храниться в единственном экстенте сопоставимого размера, а не быть разбитым на 128 000 4-килобайтных блоков, как при непрямом сопоставлении.

   - **Многоблочное распределение**. Особый механизм распределения блоков ищет свободные блоки, которые можно использовать для записи данных на диск. Файловая система ext4 задействует многоблочное распределение, позволяющее распределять несколько блоков всего лишь одним вызовом. Это уменьшает фрагментацию диска.

   - **Отложенное распределение**. Функция отложенного распределения выделяет блоки только при записи файла на диск. Благодаря этой функции кэш-память не заполняется ненужными данными, а производительность системы повышается.

   - **Неограниченное количество подкаталогов**. Ядро Linux версии 2.6.23 поддерживает неограниченное количество подкаталогов. Файловая система ext4 ввела **древовидную структуру данных HTree**, чтобы избежать снижения производительности. HTree представляет собой специализированную версию **[B-дерева](https://ru.wikipedia.org/wiki/B-%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE)**.

   - **Подсчет контрольных сумм**. Файловая система ext4 использует подсчет контрольной суммы файлов. Данный механизм был введен для снижения риска повреждения файлов. Система ведения логов является наиболее используемой частью диска. Когда происходит сбой оборудования, блоки становятся непригодными для использования и происходит повреждение файлов. Используя подсчет контрольной суммы, система постоянно проверяет, не поврежден ли блок. Этот процесс также повышает производительность, поскольку сокращает время работы с лог-файлом.

   - **Быстрая проверка файловой системы**. Файловая система ext4 помечает нераспределенные группы блоков. Время, необходимое для выполнения команды проверки диска `fsck`, значительно сокращается, поскольку отмеченные группы пропускаются. Это повышает общую производительность.

   **Онлайн****-дефрагментация**. Фрагментация диска приводит к снижению производительности файловой системы, что было серьезной проблемой для ext2 и ext3. Файловая система ext4 поддерживает утилиту **e4defrag**, которая позволяет пользователям дефрагментировать отдельные файлы или всю файловую систему.

### Ограничения файловой системы ext4

Хотя файловая система ext4 считается лучшей файловой системой для [**дистрибутивов Linux**](https://ravesli.com/obzor-distributivov-linux-kakoj-vybrat/ "Обзор дистрибутивов Linux. Какой выбрать?"), есть несколько ограничений, которые следует учитывать в вашей дальнейшей работе:

   - **Восстановление поврежденных данных**. Файловая система ext4 не может обнаружить или восстановить поврежденные данные, уже записанные на диск.

   - **Максимальный размер тома** установлен в 1 [**эксбибайт**](https://ru.wikipedia.org/wiki/%D0%AD%D0%BA%D1%81%D0%B1%D0%B8%D0%B1%D0%B0%D0%B9%D1%82). Однако файловая система не может обрабатывать более 100 тебибайт данных без значительной потери производительности и увеличения фрагментации диска.


### Ext2, Ext3, Ext4  

Первая группа ФС — Extended Filesystem (Ext2, Ext3, Ext4) — является стандартом для Linux. Как следствие, это самые распространенные системы. Они редко обновляются, но зато стабильны. Ext2 создавалась специально под Linux (изначально Extended Filesystem делали еще под Minix).

Эта группа ФС поддерживает наибольшее количество доступных функций из всех, предложенных на рынке. Ext3 (2001 г.) стала еще более стабильной, чем ее предшественница, за счет использования журналирования, а версия Ext3 (2006 г.) популярна и среди современных пользователей. Среди улучшений: увеличение максимального размера раздела до 1 Эксабайта.

### Два типа файловых систем

**Журналируемые** — данный тип ФС сохраняет историю действий пользователя, а также план проверки системы в специальном файле. Особенности: устойчивость к сбоям и сохранение целостности информации.

**Не журналируемые** — не предусматривают хранение логов. Особенности: работают быстрее, но не гарантируют сохранность данных.

Чтобы узнать тип ФС, существует команда _**file -s**_.

## Альтернативные файловые системы

  

Существует несколько альтернативных файловых систем, поддерживаемых ядром Linux.  

### XFS

**XFS** — это 64-разрядная файловая система, которая впервые была представлена в 1994 году и встроена в ядро Linux с 2001 года. XFS поддерживает максимальный размер файла в 8 эксбибайт и ограничивает длину имени файла 255 байтами. Она поддерживает ведение логов и, как и ext4, сохраняет изменения в лог-файле до того, как они будут зафиксированы в основной файловой системе. Это снижает вероятность повреждения файлов.

Данные структурированы в виде [**B+-деревьев**](https://ru.wikipedia.org/wiki/B%E2%81%BA-%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE), что обеспечивает эффективное распределение пространства и, следовательно, повышение производительности.

Основным недостатком этой системы является сложный процесс изменения размера существующей файловой системы XFS.  

### OpenZFS

**OpenZFS** — это платформа, которая объединяет функционал традиционных файловых систем и диспетчера томов. Впервые была представлена в 2013 году. OpenZFS поддерживает максимальный размер файла в 16 эксбибайт и ограничивает максимальную длину имени файла 255 символами. В качестве особенностей данной системы можно выделить защиту от повреждения данных, шифрование данных, поддержку накопителей увеличенного объема, копирование при записи и [**RAID-Z**](https://ru.wikipedia.org/wiki/RAID).

Основным недостатком OpenZFS является юридическая несовместимость между лицензиями [**CDDL**](https://ru.wikipedia.org/wiki/CDDL) (OpenZFS) и [**GPL**](https://ravesli.com/copyright-i-copyleft-litsenziya-gnu-gpl/ "Copyright и Copyleft. Лицензия GNU GPL") (ядро Linux). Эта проблема решается путем компиляции и загрузки кода ZFS в ядро Linux.  

### Btrfs

**Btrfs** (сокр. от англ. _«**B**–**tr**ee **f**ile **s**ystem»_) — это файловая система, которая была разработана компанией Oracle и выпущена вместе с ядром Linux 2.6.29 в 2009 году. Btrfs поддерживает максимальный размер файла в 16 эксбибайт и ограничивает максимальную длину имени файла 255 символами.

Некоторые особенности Btrfs включают в себя:

   - онлайн-дефрагментацию;

   - добавление и удаление блочных устройств в режиме онлайн;

   - поддержка RAID;

   - настраиваемое для каждого файла или тома сжатие;

   - клонирование файлов;

   - контрольные суммы и возможность создания файлов подкачки и разделов подкачки.

### JFS

**JFS** (сокр. от англ. _«**J**ournaled **F**ile **S**ystem»_) — это файловая система, которая была разработана компанией IBM для AIX Unix в 1990 году. Она является альтернативой файловой системе ext. Она также может быть использована вместо ext4 там, где требуется стабильность при небольшом количестве затрачиваемых ресурсов.  

### ReiserFS

**ReiserFS** — это альтернатива файловой системе ext3, которая обладает улучшенной производительностью и расширенным функционалом. Ранее, ReiserFS использовалась в качестве файловой системы по умолчанию в SUSE Linux. ReiserFS поддерживает динамическое изменение размеров файловой системы. К недостаткам можно отнести относительно низкую производительность.

**_Примечание_**: Такие файловые системы, как _**NTFS**_, _**FAT**_ и _**HFS**_ могут использоваться в Linux, но корневая файловая система Linux на них не устанавливается, поскольку они для этого не предназначены. **Swap** — это файл подкачки, служащий источником дополнительной памяти в тех случаях, когда для выполнения программы требуется больше оперативной памяти, чем имеется в компьютере, — он не является отдельной файловой системой.

### JFS

Журналируемая ФС — первая альтернатива для ФС группы Ext. Ее разработали в IBM специально для операционной системы AIX UNIX. Главные плюсы этой системы: стабильность и минимальные требования для работы. Разработчики JFS ставили перед собой цель создать ФС, которая бы эффективно работала на многопроцессорных компьютерах. Кроме того, эта система также относится к журналируемым ФС. Но есть и очевидные недостатки. Если случится непредвиденный сбой в работе системы, ФС может использовать версии файлов, которые уже устарели. Причина заключается в том, что журнал сохраняет только метаданные.

### ReiserFS

Эта ФС разработана под руководством Ганса Райзера и названа в честь него. Подходит исключительно под Linux, чаще всего ее используют в качестве возможной замены Ext3. Главные особенности: увеличенная производительность и более широкие возможности. Изменяющийся размер блока дает пользователю возможность объединять небольшие файлы в один блок, таким образом удается избежать фрагментации и повысить качество работы ФС в целом. Размер разделов можно менять прямо в процессе работы, однако эта ФС может показать нестабильные результаты и потерять данные, например, при отключении энергии.

### XFS

Еще одна журналируемая ФС. Однако, в отличие от аналогов, в логи записывает исключительно те изменения, которые претерпевают метаданные. Разработана для ОС в Silicon Graphics. Важные особенности: быстро работает с файлами сравнительно большого размера, умеет выделять место в отложенном режиме, а также менять размеры разделов в процессе работы. Часто встречается в дистрибутивах на основе Red Hat. Минусы: нельзя уменьшить размер разделов, сложно восстанавливать данные и можно потерять информацию при отключении питания.

### Btrfs

Современная ФС, главной особенностью которой является высокая отказоустойчивость. Из дополнительных «бонусов»: удобна для сисадминов и поддерживает сравнительно простой процесс восстановления данных. Поддерживает подтома, разрешает менять размеры разделов в динамическом режиме и позволяет делать снапшоты. Отличается высокой производительность. Применяется как ФС, установленная по умолчанию, в OpenSUSE и SUSE Linux. Главный минус — нестабильность (нарушена обратная совместимость, сложная для поддержки и так далее).

### F2FS

Flash-Friendly File System входит в состав ядра ОС Linux и предназначена для использования с хранилищем на основе флеш-памяти. Разработчик — корпорация Samsung. F2FS разбивает носитель на части, которые снова делятся, и так далее. Эти миниатюрные зоны используются вместо повторного использования одних и тех же размеченных участков.

### OpenZFS

OpenZFS — ветвь ZFS, о которой мы пишем ниже). Разработчик — компания Sun для ОС Solaris. В 2016 году Ubuntu включила ее поддержку по умолчанию. Главные плюсы: защита от повреждения данных, поддержка больших файлов и автоматическое восстановление.

Традиционные для Windows ФС NTFS, FAT, HFS применяются в Linux, но пользователь не сможет установить в такие разделы корень, поскольку структура этих ФС для этого не приспособлена.


## Особые файловые системы

Можно привести и другие разновидности файловых систем. Например, линуксоидам известны специальные ФС. Они используются для обеспечения доступа пользователю или приложениям к настройкам ядра ОС. Среди специальных файловых систем выделяют:

-   **tmpfs**. Записывает данные в оперативную память, создавая блочное устройство требуемого размера, которое затем подключают к папке.
-   **procfs**. Отвечает за хранение информации о системных процессах и ядре.
-   **sysfs**. Управляет настройками ядра ОС.

Бывают ситуации, когда наличие ФС в ядре системы не требуется. В этом случае можно использовать модуль FUSE (filesystem in userspace), который создаёт виртуальную файловую систему. Существует несколько видов виртуальных ФС с разным функционалом:

-   **EncFS**. Шифрует файлы и сохраняет их в выбранную директорию.
-   **Aufs**. Объединяет несколько file system в одну. Умеет делать то же самое с папками.
-   **NFS**. Может удалённо монтировать ФС.
-   **ZFS**. Создана для операционной системы Solaris. Отсутствие фрагментации, управление снапшотами, меняющийся размер блоков обеспечивают высокий уровень привлекательности этой ФС.

Отметим, что в этой статье даются базовые сведения о файловых системах Linux, а типов ФС существует намного больше. Если вам требуется более детальная информация о типах ФС и их отличиях, рекомендуем обратиться к документации.


# Даполняй с сайта ravesli иеархию!