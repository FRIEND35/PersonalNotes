# Драйвер

## thecode.media

### Что такое драйвер

Драйвер — это программа, которая работает как инструкция для операционной системы. Драйвер объясняет операционке, как пользоваться каким-то устройством.

Устройство — это то, что физически подключается к компьютеру:

-   видеокарта,
-   мышь,
-   криптотокен,
-   монитор,
-   сканер,
-   джойстик для игр.

Драйвер рассказывает компьютеру, как этим железом пользоваться, что оно умеет, какие команды понимает и как это железо могут использовать другие программы.

- Технически драйвер — это программа, которая висит в памяти компьютера всё время, пока компьютеру нужно это устройство.

![[Pasted image 20221028070417.png]]

### Известное и неизвестное железо

Операционная система в компьютере знает и умеет многое, в том числе и работать со стандартным оборудованием. Стандартным — это значит тем, которое предоставляет стандартные возможности.

Например, клавиатура, мышь или веб-камера — это стандартное оборудование, потому что независимо от производителя они делают примерно одно и то же.

Разработчики операционной системы знают про такое оборудование, поэтому могут написать стандартные драйверы, которые подойдут к большинству устройств. Именно поэтому мы можем купить в магазине новую мышь и просто подключить её к компьютеру без установки дополнительных программ — операционная система сама разберётся, что делать.

Но бывает так, что разработчики добавили в устройство нестандартные возможности: переназначение сочетаний клавиш, сделали мышь с несколькими колёсиками или встроенный лазерный дальномер в видеокамеру. В этом случае компьютер не разберётся, как этим всем пользоваться, потому что в стандартных драйверах про это ничего нет.

В таких случаях разработчики устройств пишут свой драйвер, который объяснит компьютеру, как пользоваться всеми возможностями устройства. Этот драйвер нужно будет установить.

### Сложное оборудование

Ещё бывает так, что оборудование хоть и стандартное, но сложное, например, видеокарта или принтер. Каждый производитель добавляет свои функции и технологии, которые считает нужными, и чаще всего они не совпадают с другими. Если подключить такое устройство к компьютеру, то компьютер, скорее всего, разберётся, что именно в него воткнули, то как с этим работать — неизвестно.

Здесь тоже нужны драйверы — они идут или в комплекте с устройством на компакт-диске или их качают с официального сайта производителя. Чем сложнее устройство, тем больше вероятность, что без установки дополнительных драйверов оно работать не будет.

Например, если у вас навороченная видеокарта, вы вставляете её в компьютер и сначала видите странную огромную картинку с низким разрешением. Это значит, что компьютер пока не нашёл драйверов на эту карточку и запустил её в «режиме совместимости» — то есть в том режиме, в котором он точно сможет ей управлять. Но возможности видеокарты будут сильно порезаны, пока мы не установим нужные нам драйверы.

### Что значит «слетели драйвера»?

Это значит, что компьютер не может найти файлы с инструкциями от какого-то устройства. Так бывает при обновлениях системы, заражении вирусом или просто кто-то случайно мог удалить нужные файлы или папку целиком.

Решение простое: берёте заново драйвер с официального сайта или тот, который шёл в комплекте с устройством, и запускаете программу-установщик заново. А она уже сама разберётся, каких файлов не хватает, и настроит всё заново.

### Драйверы нужны только на Windows? 

Драйверы нужны на всех компьютерах и для всех операционных систем. Но некоторые операционки идут с кучей драйверов в комплекте, а у других этот набор более скромный.

Общее правило для 2021 года такое: большая часть оборудования, которое нужно для обычной офисной работы, подключится к любому компьютеру без необходимости что-то устанавливать. Операционка сама поймёт, что это за устройство, и, скорее всего, у неё уже будут драйверы.

А вот какое-то более сложное оборудование (например, профессиональная аудиокарта или видеокамера) потребуют установки драйверов от производителя.

### В чём проблема с драйверами

Проблема в том, что часто производители не делают новые драйверы для старого оборудования. Например:

Есть диджейский контроллер Numark NS7 — это профессиональное оборудование для диджеев и артистов, оно стоит дорого и нужно примерно 100 тысячам человек на всей планете.

Когда контроллер только вышел, компания Numark выпускала драйвера на все свежие операционные системы, проблем с совместимостью не было.

Потом аппарат сняли с производства, поддержку прекратили. Последняя версия драйверов, которую выпустил Numark, — для Windows 10 и MacOS 10.12 (Sierra). С тех пор у Windows вышло большое обновление до 11, а MacOS обновился раз пять. Причём последние две версии сделаны для процессоров Apple, и уже нет надежды, что Numark обновит драйверы для этой архитектуры.

[Почему процессоры Apple M1 такие быстрые](https://thecode.media/fast-m1/)

Так что, если вам достался этот редкий профессиональный прибор, вы вынуждены сидеть на древней MacOS Sierra, которая стремительно перестаёт поддерживаться современным софтом.

Что с этим делать? А ничего ты с этим не сделаешь. Такова жизнь.

Драйвер устройства - программа, написанная специально для конкретного периферийного устройства с целью обеспечить управление этим устройством со стороны операционной системы.



## habr.ru


Основная задача любого драйвера – это предоставление софтового интерфейса для управления устройством, с помощью которого операционная система и другие компьютерные программы получают доступ к функциям данного устройства, «не зная» как конкретно оно используется и работает.  
  
Обычно драйвер общается с устройством через шину или коммуникационную подсистему, к которой подключено непосредственное устройство. Когда программа вызывает процедуру (очередность операций) драйвера – он направляет команды на само устройство. Как только устройство выполнило процедуру («рутину»), данные посылаются обратно в драйвер и уже оттуда в ОС.  
  
Любой драйвер является зависимым от самого устройства и специфичен для каждой операционной системы. Обычно драйверы предоставляют схему прерывания для обработки асинхронных процедур в интерфейсе, зависимом от времени ее исполнения.  
  
Любая операционная система обладает «картой устройств» (которую мы видим в диспетчере устройств), для каждого из которых необходим специфический драйвер. Исключения составляют лишь центральный процессор и оперативная память, которой управляет непосредственно ОС. Для всего остального нужен драйвер, который переводит команды операционной системы в последовательность прерываний – пресловутый «двоичный код».  
  

### Как работает драйвер и для чего он нужен?

  
Основное назначение драйвера – это упрощение процесса программирования работы с устройством.  
  
Он служит «переводчиком» между хардовым (железным) интерфейсом и приложениями или операционными системами, которые их используют. Разработчики могут писать, с помощью драйверов, высокоуровневые приложения и программы не вдаваясь в подробности низкоуровневого функционала каждого из необходимых устройств в отдельности.  
  
Как уже упоминалось, драйвер специфичен для каждого устройства. Он «понимает» все операции, которые устройство может выполнять, а также протокол, с помощью которого происходит взаимодействие между софтовой и железной частью. И, естественно, управляется операционной системой, в которой выполняет конкретной приложение либо отдельная функция самой ОС («печать с помощью принтера»).  
  
Если вы хотите отформатировать жесткий диск, то, упрощенно, этот процесс выглядит следующим образом и имеет определенную последовательность: (1) сначала ОС отправляет команду в драйвер устройства используя команду, которую понимает и драйвер, и операционная система. (2) После этого драйвер конкретного устройства переводит команду в формат, который понимает уже только устройство. (3) Жесткий диск форматирует себя, возвращает результат драйверу, который уже впоследствии переводит эту команду на «язык» операционной системы и выдает результат её пользователю (4).

### Как создается драйвер устройства

![[Pasted image 20221028071118.png]]


Для каждого устройства существует свой строгий порядок выполнения команд, называемой «инструкцией». Не зная инструкцию к устройству, невозможно написать для него драйвер, так как низкоуровневые машинные команды являются двоичным кодом (прерываниями) которые на выходе отправляют в драйвер результат, полученный в ходе выполнения этой самой инструкции.  
  
При создании драйвера для Линукса, вам необходимо знать не только тип шины и ее адрес, но и схематику самого устройства, а также весь набор электрических прерываний, в ходе исполнения которых устройство отдает результат драйверу.  
  
Написание любого драйвера начинается с его «скелета» — то есть самых основных команд вроде «включения/выключения» и заканчивая специфическими для данного устройства параметрами.  
  

### И чем драйвер не является

  
Часто драйвер устройства сравнивается с другими программами, выполняющими роль «посредника» между софтом и/или железом. Для того, чтобы расставить точки над «i», уточняем:  
  

-   Драйвер не является интерпретатором, так как не исполняется напрямую в софтовом слое приложения или операционной системы.
-   Драйвер не является компилятором, так как не переводит команды из одного софтового слоя в другой, такой же.


## Для особо одаренных

Драйвер - Это микропрограмма, написанная создателем устройства, который обьясняет ОС как работать с устройтвом. Этот микропрограмма содержить в себе набор данных об устройстве, а так же инструкции (команды) для работы с данным устройством, благодаря которого и система работает с ним. Вот допустим вы подключили новый монитор до установление драйверов в системе. Система не знает какие расширении и частоты подерживает монитор и поэтому экран может не растягиваться, тормозить изображение и многое другое, другими словами - монитор не работает нужным образом. То есть драйвер обьясняет системе что это такое и как с ним работать (можно сказать инструкция по использование устройством).
Во многих системах драйвера уже предустановлены, но там очень мало функции, это нам не позволяет работать с устройством на максимуме, а чтобы это исправить, нам нужно установть новые многофункциональные драйвера. Вот допусти вы хотите играть в игру в HD, но что-то не так. Попробуйте установить новые многофункциональные драйвера, чтобы они могли использовать монитор и видеокарту на максимуме. 

Так можно понять что драйвер учить ОС как работать с оборудованием. Если вы установили новое устройста на свой ПК не знаю там новую камеру, принтер или что нибудь еще и он не работает, то просто установите нужный вам драйвер - не любой, а именно для этого устройства и для этого моделя. Это касается и того что на компьютере не распазнаётся смартфон, USB или другое устройство.

Видеокарта это железо, оно просто есть. Драйвера ставятся в систему (как виндовс), по умолчанию там есть какие-то драйвера, которые скорее всего позволят показать рабочий стол через эту видео карту, но если нужно на ней играть их лучше установиться скачав с сайта производителя или послушав виндовс который скорее всего сам предложит их скачать. 

Раньше с видеокартой шёл диск с драйверами, сейчас такого нет, после установки надо скачать с сайта последнюю версию.
Базово, при подключении  карты будет возможность с ней работать в минимальном разрешении экрана.